<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>vue3ç¬”è®° | å‰ç«¯çŸ¥è¯†ç‚¹è®°å½•</title>
  <meta name="keywords" content="">
  <meta name="description" content="vue3ç¬”è®° | å‰ç«¯çŸ¥è¯†ç‚¹è®°å½•">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="baidu-site-verification" content="codeva-LecjeKsg4q" />
<meta name="msvalidate.01" content="BDC4733A72EDADC029644A0AB0A022AD" />
<meta name="description" content="å¯¼èˆª çˆ±è¾¾æ‚è´§é“º | æ”¶é›†é‚£äº›æœ‰ç”¨çš„ä¸œè¥¿|çˆ±è¾¾å¯¼èˆª (adzhp.net) Jayçš„èµ„æºåº“ | äº’è”ç½‘èµ„æºé›†å¤§æˆè€… (lovejay.top) æ•°å­—ç”Ÿæ´»æŒ‡å— | è®©å·¥ä½œå­¦ä¹ ç”Ÿæ´»æ›´é«˜æ•ˆï¼guidebook.top è¿·é¹¿å¯¼èˆª (404l.com) å–µè¶£å¯¼èˆª | æ›´å¥½ç”¨çš„å¯¼èˆª (meowa.cn)  å…è´¹çš„å¤šåˆä¸€åœ¨çº¿PDFå·¥å…· è½¯ä»¶SOS_ç©æœºæ‰‹å†Œï¼Œè½¯ä»¶å®‰è£…ç®¡å®¶_è½¯ä»¶æ¿€æ´»å·¥å…·ä¸‹è½½ (rjsos.com)">
<meta property="og:type" content="article">
<meta property="og:title" content="ç½‘ç«™ã€è®ºå›åˆé›†">
<meta property="og:url" content="http://example.com/2023/02/28/%E7%BD%91%E7%AB%99%E3%80%81%E8%AE%BA%E5%9D%9B%E5%90%88%E9%9B%86/index.html">
<meta property="og:site_name" content="å‰ç«¯çŸ¥è¯†ç‚¹è®°å½•">
<meta property="og:description" content="å¯¼èˆª çˆ±è¾¾æ‚è´§é“º | æ”¶é›†é‚£äº›æœ‰ç”¨çš„ä¸œè¥¿|çˆ±è¾¾å¯¼èˆª (adzhp.net) Jayçš„èµ„æºåº“ | äº’è”ç½‘èµ„æºé›†å¤§æˆè€… (lovejay.top) æ•°å­—ç”Ÿæ´»æŒ‡å— | è®©å·¥ä½œå­¦ä¹ ç”Ÿæ´»æ›´é«˜æ•ˆï¼guidebook.top è¿·é¹¿å¯¼èˆª (404l.com) å–µè¶£å¯¼èˆª | æ›´å¥½ç”¨çš„å¯¼èˆª (meowa.cn)  å…è´¹çš„å¤šåˆä¸€åœ¨çº¿PDFå·¥å…· è½¯ä»¶SOS_ç©æœºæ‰‹å†Œï¼Œè½¯ä»¶å®‰è£…ç®¡å®¶_è½¯ä»¶æ¿€æ´»å·¥å…·ä¸‹è½½ (rjsos.com)">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-02-28T07:20:18.000Z">
<meta property="article:modified_time" content="2023-03-02T03:21:44.981Z">
<meta property="article:author" content="Feng">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 5.2.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>Feng</span>
</div>

<div class="icon">
    
        
            <a title="rss"
               href="/atom.xml"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/fengqichang666"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="facebook"
               href="https://www.facebook.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-facebook"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
            <a title="instagram"
               href="https://www.facebook.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-instagram"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="reddit"
               href="https://www.reddit.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-reddit"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="weibo"
               href="http://weibo.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-weibo"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="jianshu"
               href="https://www.jianshu.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-jianshu"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="zhihu"
               href="https://www.zhihu.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-zhihu"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="oschina"
               href="https://my.oschina.net/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-oschina"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="email"
               href="mailto:2309997549@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=2309997549&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="kugou"
               href="https://www.kugou.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-kugou"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="neteasemusic"
               href="https://music.163.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-neteasemusic"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(41)</small>
            
        </div>
    </li>
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">About</a>
        
        <a style="width: 50%"
                
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="41">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://wgrape.github.io/">WGrape</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼å¤§å…¨</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ„é€ å‡½æ•°ã€åŸå‹å¯¹è±¡ã€å¯¹è±¡å®ä¾‹</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å‰ç«¯æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>gitæ“ä½œæŒ‡ä»¤å¤§å…¨</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Proxyå’ŒObject.defineProperty</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>vue</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="All "
           href="/2023/02/28/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="å‰ç«¯å­¦ä¹ èµ„æ–™">å‰ç«¯å­¦ä¹ èµ„æ–™</span>
            <span class="post-date" title="2023-02-28 15:28:27">2023/02/28</span>
        </a>
        
        
        <a  class="All "
           href="/2023/02/28/%E5%AF%BC%E8%88%AA%E8%81%9A%E5%90%88%E7%BD%91%E7%AB%99/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ç½‘ç«™ã€è®ºå›åˆé›†">ç½‘ç«™ã€è®ºå›åˆé›†</span>
            <span class="post-date" title="2023-02-28 15:20:18">2023/02/28</span>
        </a>
        
        
        <a  class="All "
           href="/2023/02/28/%E7%BD%91%E7%AB%99%E3%80%81%E8%AE%BA%E5%9D%9B%E5%90%88%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ç½‘ç«™ã€è®ºå›åˆé›†">ç½‘ç«™ã€è®ºå›åˆé›†</span>
            <span class="post-date" title="2023-02-28 15:20:18">2023/02/28</span>
        </a>
        
        
        <a  class="All "
           href="/2023/02/24/vue%E5%AF%B9%E6%95%B0%E7%BB%84%E7%9A%84%E5%A4%84%E7%90%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vueå¯¹æ•°ç»„çš„å¤„ç†">vueå¯¹æ•°ç»„çš„å¤„ç†</span>
            <span class="post-date" title="2023-02-24 13:53:03">2023/02/24</span>
        </a>
        
        
        <a  class="All "
           href="/2023/02/23/vue%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86%E5%8F%8A%E6%94%B6%E9%9B%86%E4%BE%9D%E8%B5%96/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vueå“åº”å¼åŸç†ã€ä¾èµ–æ”¶é›†">vueå“åº”å¼åŸç†ã€ä¾èµ–æ”¶é›†</span>
            <span class="post-date" title="2023-02-23 09:38:38">2023/02/23</span>
        </a>
        
        
        <a  class="All "
           href="/2023/02/21/webpack%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="webpackç¬”è®°">webpackç¬”è®°</span>
            <span class="post-date" title="2023-02-21 14:43:08">2023/02/21</span>
        </a>
        
        
        <a  class="All "
           href="/2023/02/21/react%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="reactç¬”è®°">reactç¬”è®°</span>
            <span class="post-date" title="2023-02-21 14:43:02">2023/02/21</span>
        </a>
        
        
        <a  class="All "
           href="/2023/02/21/uniapp%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="uniappç¬”è®°">uniappç¬”è®°</span>
            <span class="post-date" title="2023-02-21 14:42:53">2023/02/21</span>
        </a>
        
        
        <a  class="All "
           href="/2023/01/11/JS%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="å·¥å…·å‡½æ•°">å·¥å…·å‡½æ•°</span>
            <span class="post-date" title="2023-01-11 17:09:41">2023/01/11</span>
        </a>
        
        
        <a  class="All "
           href="/2023/01/11/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95SSO/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="å•ç‚¹ç™»å½•SSO">å•ç‚¹ç™»å½•SSO</span>
            <span class="post-date" title="2023-01-11 13:56:41">2023/01/11</span>
        </a>
        
        
        <a  class="All "
           href="/2023/01/11/%E5%89%8D%E7%AB%AF%E9%89%B4%E6%9D%83cookie%E3%80%81session%E3%80%81token%E3%80%81jwt%E3%80%81%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="å‰ç«¯é‰´æƒcookieã€sessionã€tokenã€jwtã€å•ç‚¹ç™»å½•">å‰ç«¯é‰´æƒcookieã€sessionã€tokenã€jwtã€å•ç‚¹ç™»å½•</span>
            <span class="post-date" title="2023-01-11 10:13:51">2023/01/11</span>
        </a>
        
        
        <a  class="All "
           href="/2022/12/22/%E7%BB%84%E4%BB%B6%E5%BA%93%E5%BC%80%E5%8F%91/"
           data-tag="vue"
           data-author="" >
            <span class="post-title" title="ç»„ä»¶åº“å¼€å‘">ç»„ä»¶åº“å¼€å‘</span>
            <span class="post-date" title="2022-12-22 15:17:36">2022/12/22</span>
        </a>
        
        
        <a  class="All "
           href="/2022/12/22/pinia/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="pinia">pinia</span>
            <span class="post-date" title="2022-12-22 10:55:10">2022/12/22</span>
        </a>
        
        
        <a  class="All "
           href="/2022/12/21/router4%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="router4ç¬”è®°">router4ç¬”è®°</span>
            <span class="post-date" title="2022-12-21 17:02:33">2022/12/21</span>
        </a>
        
        
        <a  class="All "
           href="/2022/12/15/vue3%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vue3ç¬”è®°">vue3ç¬”è®°</span>
            <span class="post-date" title="2022-12-15 15:00:16">2022/12/15</span>
        </a>
        
        
        <a  class="All "
           href="/2022/11/15/git-HEAD-%E4%B8%8EHEAD-%E7%9A%84%E5%8C%BA%E5%88%AB/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="git HEAD~ä¸HEAD^çš„åŒºåˆ«">git HEAD~ä¸HEAD^çš„åŒºåˆ«</span>
            <span class="post-date" title="2022-11-15 14:17:58">2022/11/15</span>
        </a>
        
        
        <a  class="All "
           href="/2022/10/08/%E5%BC%80%E5%8F%91%E4%B8%AD%E5%AE%B9%E6%98%93%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="å¼€å‘ä¸­å®¹æ˜“é‡åˆ°çš„é—®é¢˜">å¼€å‘ä¸­å®¹æ˜“é‡åˆ°çš„é—®é¢˜</span>
            <span class="post-date" title="2022-10-08 16:30:35">2022/10/08</span>
        </a>
        
        
        <a  class="All "
           href="/2022/09/22/js%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="jsæ‰§è¡Œæœºåˆ¶">jsæ‰§è¡Œæœºåˆ¶</span>
            <span class="post-date" title="2022-09-22 16:08:28">2022/09/22</span>
        </a>
        
        
        <a  class="All "
           href="/2022/09/19/vue-elementui-%E8%A1%A8%E5%8D%95%E6%A3%80%E9%AA%8C%E4%B8%AD%E5%8F%91%E9%80%81%E6%8E%A5%E5%8F%A3%E8%BF%9B%E8%A1%8C%E6%A0%A1%E9%AA%8C/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vue+elementui è¡¨å•æ£€éªŒä¸­å‘é€æ¥å£è¿›è¡Œæ ¡éªŒ">vue+elementui è¡¨å•æ£€éªŒä¸­å‘é€æ¥å£è¿›è¡Œæ ¡éªŒ</span>
            <span class="post-date" title="2022-09-19 19:30:51">2022/09/19</span>
        </a>
        
        
        <a  class="All "
           href="/2022/09/19/eslint%E4%BD%BF%E7%94%A8%E3%80%81%E6%8A%A5%E9%94%99%E9%83%A8%E5%88%86%E5%BF%AB%E9%80%9F%E4%BF%AE%E5%A4%8D/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vue-cliä¸­eslintæ£€éªŒæŒ‡å®šæ–‡ä»¶/å¤¹ã€æŠ¥é”™éƒ¨åˆ†å¿«é€Ÿä¿®å¤">vue-cliä¸­eslintæ£€éªŒæŒ‡å®šæ–‡ä»¶/å¤¹ã€æŠ¥é”™éƒ¨åˆ†å¿«é€Ÿä¿®å¤</span>
            <span class="post-date" title="2022-09-19 19:28:46">2022/09/19</span>
        </a>
        
        
        <a  class="All "
           href="/2022/07/17/%E9%87%91%E9%A2%9D%E8%BE%93%E5%85%A5%E6%A1%86%E5%B0%81%E8%A3%85%EF%BC%88%E5%8D%83%E5%88%86%E4%BD%8D%EF%BC%8C%E7%A6%81%E6%AD%A2%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%EF%BC%89/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="é‡‘é¢è¾“å…¥æ¡†å°è£…ï¼ˆåƒåˆ†ä½ï¼Œç¦æ­¢ä¸­æ–‡è¾“å…¥ï¼‰">é‡‘é¢è¾“å…¥æ¡†å°è£…ï¼ˆåƒåˆ†ä½ï¼Œç¦æ­¢ä¸­æ–‡è¾“å…¥ï¼‰</span>
            <span class="post-date" title="2022-07-17 16:34:55">2022/07/17</span>
        </a>
        
        
        <a  class="All "
           href="/2022/07/17/%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6keydown%EF%BC%8Ckeypress%EF%BC%8Ckeyup/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="é”®ç›˜äº‹ä»¶keydownï¼Œkeypressï¼Œkeyup">é”®ç›˜äº‹ä»¶keydownï¼Œkeypressï¼Œkeyup</span>
            <span class="post-date" title="2022-07-17 11:46:10">2022/07/17</span>
        </a>
        
        
        <a  class="All "
           href="/2022/07/03/nodejs-websocket/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="nodejs-websocket">nodejs-websocket</span>
            <span class="post-date" title="2022-07-03 13:13:15">2022/07/03</span>
        </a>
        
        
        <a  class="All "
           href="/2022/06/19/Git%E5%87%AD%E6%8D%AE%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F-https/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Gitå‡­æ®ç®¡ç†çš„ä¸‰ç§æ–¹å¼(https)">Gitå‡­æ®ç®¡ç†çš„ä¸‰ç§æ–¹å¼(https)</span>
            <span class="post-date" title="2022-06-19 11:56:57">2022/06/19</span>
        </a>
        
        
        <a  class="All "
           href="/2022/06/19/git-merge-no-ff-%E4%B8%8E-ff-%E5%92%8C-squash%E7%9A%84%E5%8C%BA%E5%88%AB/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="git merge --no-ff ä¸--ff å’Œ--squashçš„åŒºåˆ«">git merge --no-ff ä¸--ff å’Œ--squashçš„åŒºåˆ«</span>
            <span class="post-date" title="2022-06-19 11:18:58">2022/06/19</span>
        </a>
        
        
        <a  class="All "
           href="/2021/12/08/vue3+elementplus+ts+pinia%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vue3+elementplus+ts+piniaè¸©å‘è®°å½•">vue3+elementplus+ts+piniaè¸©å‘è®°å½•</span>
            <span class="post-date" title="2021-12-08 15:23:24">2021/12/08</span>
        </a>
        
        
        <a  class="All "
           href="/2021/12/08/vue%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%B0%E5%BD%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vueçŸ¥è¯†ç‚¹è®°å½•">vueçŸ¥è¯†ç‚¹è®°å½•</span>
            <span class="post-date" title="2021-12-08 15:23:24">2021/12/08</span>
        </a>
        
        
        <a  class="All "
           href="/2021/12/08/vue%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BB%84%E4%BB%B6css%E4%BF%AE%E6%94%B9/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vueç¬¬ä¸‰æ–¹ç»„ä»¶cssä¿®æ”¹">vueç¬¬ä¸‰æ–¹ç»„ä»¶cssä¿®æ”¹</span>
            <span class="post-date" title="2021-12-08 14:00:41">2021/12/08</span>
        </a>
        
        
        <a  class="All "
           href="/2021/11/25/vuex/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vuex">vuex</span>
            <span class="post-date" title="2021-11-25 15:56:11">2021/11/25</span>
        </a>
        
        
        <a  class="All "
           href="/2021/10/25/commonJS%E4%B8%8Ees6%E6%A8%A1%E5%9D%97%E5%8C%96/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="exportsã€module.exportså’Œexportã€export default">exportsã€module.exportså’Œexportã€export default</span>
            <span class="post-date" title="2021-10-25 13:41:29">2021/10/25</span>
        </a>
        
        
        <a  class="All "
           href="/2021/10/08/%E8%99%9A%E6%8B%9FDOM%E4%B8%8EDIFF%E7%AE%97%E6%B3%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="è™šæ‹ŸDOMä¸DIFFç®—æ³•">è™šæ‹ŸDOMä¸DIFFç®—æ³•</span>
            <span class="post-date" title="2021-10-08 16:57:02">2021/10/08</span>
        </a>
        
        
        <a  class="All "
           href="/2021/09/24/%E8%AF%A6%E8%A7%A3mixins%E6%B7%B7%E5%85%A5%E4%BD%BF%E7%94%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="è¯¦è§£mixinsæ··å…¥ä½¿ç”¨">è¯¦è§£mixinsæ··å…¥ä½¿ç”¨</span>
            <span class="post-date" title="2021-09-24 17:10:18">2021/09/24</span>
        </a>
        
        
        <a  class="All "
           href="/2021/09/24/Vue%E4%B8%ADextend-mixins-extends%E4%BB%A5%E5%8F%8AVue-use%E7%9A%84install%E5%92%8CVue-nextTick/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Vueä¸­extend,mixins,extendsä»¥åŠVue.useçš„installå’ŒVue.nextTick">Vueä¸­extend,mixins,extendsä»¥åŠVue.useçš„installå’ŒVue.nextTick</span>
            <span class="post-date" title="2021-09-24 15:33:37">2021/09/24</span>
        </a>
        
        
        <a  class="All "
           href="/2021/07/20/vue%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vueç»„ä»¶é€šä¿¡">vueç»„ä»¶é€šä¿¡</span>
            <span class="post-date" title="2021-07-20 11:00:15">2021/07/20</span>
        </a>
        
        
        <a  class="All "
           href="/2021/07/15/%E6%A0%B7%E5%BC%8F%E6%B8%85%E5%8D%95%E6%95%B4%E7%90%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="æ ·å¼æ¸…å•æ•´ç†">æ ·å¼æ¸…å•æ•´ç†</span>
            <span class="post-date" title="2021-07-15 09:34:39">2021/07/15</span>
        </a>
        
        
        <a  class="All "
           href="/2021/07/07/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="æ•°æ®ç±»å‹åˆ¤æ–­">æ•°æ®ç±»å‹åˆ¤æ–­</span>
            <span class="post-date" title="2021-07-07 15:21:32">2021/07/07</span>
        </a>
        
        
        <a  class="All "
           href="/2021/07/07/Proxy%E5%92%8CObject-defineProperty/"
           data-tag="Proxyå’ŒObject.defineProperty"
           data-author="" >
            <span class="post-title" title="Proxyå’ŒObject.defineProperty">Proxyå’ŒObject.defineProperty</span>
            <span class="post-date" title="2021-07-07 10:31:00">2021/07/07</span>
        </a>
        
        
        <a  class="All "
           href="/2021/06/30/git%E6%93%8D%E4%BD%9C%E6%8C%87%E4%BB%A4/"
           data-tag="gitæ“ä½œæŒ‡ä»¤å¤§å…¨"
           data-author="" >
            <span class="post-title" title="gitå‘½ä»¤æ€»ç»“">gitå‘½ä»¤æ€»ç»“</span>
            <span class="post-date" title="2021-06-30 10:28:12">2021/06/30</span>
        </a>
        
        
        <a  class="All "
           href="/2021/06/30/%E5%B8%B8%E7%94%A8%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%A4%A7%E5%85%A8/"
           data-tag="å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼å¤§å…¨"
           data-author="" >
            <span class="post-title" title="å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼å¤§å…¨">å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼å¤§å…¨</span>
            <span class="post-date" title="2021-06-30 10:28:12">2021/06/30</span>
        </a>
        
        
        <a  class="All "
           href="/2020/06/06/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E9%9D%A2%E8%AF%95%E9%A2%98/"
           data-tag="å‰ç«¯æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜"
           data-author="" >
            <span class="post-title" title="å‰ç«¯æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜æ€»ç»“">å‰ç«¯æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜æ€»ç»“</span>
            <span class="post-date" title="2020-06-06 15:33:46">2020/06/06</span>
        </a>
        
        
        <a  class="All "
           href="/2020/05/24/%E5%8E%9F%E5%9E%8B%E9%93%BE/"
           data-tag="æ„é€ å‡½æ•°ã€åŸå‹å¯¹è±¡ã€å¯¹è±¡å®ä¾‹"
           data-author="" >
            <span class="post-title" title="åŸå‹é“¾">åŸå‹é“¾</span>
            <span class="post-date" title="2020-05-24 10:40:00">2020/05/24</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-vue3ç¬”è®°" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">vue3ç¬”è®°</h1>
    
    <div class="article-meta">
        
        
        
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2023-03-03 15:39:40'>2022-12-15 15:00</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3-%E6%96%B0%E7%89%B9%E6%80%A7%E4%BB%8B%E7%BB%8D"><span class="toc-text">Vue3 æ–°ç‰¹æ€§ä»‹ç»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%86%99%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A"><span class="toc-text">é‡å†™åŒå‘ç»‘å®š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3-%E4%BC%98%E5%8C%96Vdom"><span class="toc-text">Vue3 ä¼˜åŒ–Vdom</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#patch-flag-%E4%BC%98%E5%8C%96%E9%9D%99%E6%80%81%E6%A0%91"><span class="toc-text">patch flag ä¼˜åŒ–é™æ€æ ‘</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3-Fragment"><span class="toc-text">Vue3 Fragment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ref%E5%85%A8%E5%AE%B6%E6%A1%B6"><span class="toc-text">Refå…¨å®¶æ¡¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ref"><span class="toc-text">ref</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#isRef"><span class="toc-text">isRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shallowRef%E3%80%81triggerRef"><span class="toc-text">shallowRefã€triggerRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#customRef"><span class="toc-text">customRef</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reactive%E5%85%A8%E5%AE%B6%E6%A1%B6"><span class="toc-text">Reactiveå…¨å®¶æ¡¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#reactive"><span class="toc-text">reactive</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#readonly"><span class="toc-text">readonly</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shallowReactive"><span class="toc-text">shallowReactive</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#to%E7%B3%BB%E5%88%97%E5%85%A8%E5%AE%B6%E6%A1%B6"><span class="toc-text">toç³»åˆ—å…¨å®¶æ¡¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#toRef"><span class="toc-text">toRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toRefs"><span class="toc-text">toRefs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toRaw"><span class="toc-text">toRaw</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#computed%E7%94%A8%E6%B3%95"><span class="toc-text">computedç”¨æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watch%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-text">watchä¾¦å¬å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watchEffect%E9%AB%98%E7%BA%A7%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-text">watchEffecté«˜çº§ä¾¦å¬å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E9%99%A4%E5%89%AF%E4%BD%9C%E7%94%A8-oninvalidate"><span class="toc-text">æ¸…é™¤å‰¯ä½œç”¨ oninvalidate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%AF%E4%BD%9C%E7%94%A8%E5%88%B7%E6%96%B0%E6%97%B6%E6%9C%BA-flush-%E4%B8%80%E8%88%AC%E4%BD%BF%E7%94%A8post"><span class="toc-text">å‰¯ä½œç”¨åˆ·æ–°æ—¶æœº flush ä¸€èˆ¬ä½¿ç”¨post</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VNode-hooks"><span class="toc-text">VNode hooks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="toc-text">çˆ¶å­ç»„ä»¶ä¼ å‚</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#defineProps"><span class="toc-text">defineProps </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defineEmits"><span class="toc-text">defineEmits</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defineExpose"><span class="toc-text">defineExpose</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5Provide-Inject"><span class="toc-text">ä¾èµ–æ³¨å…¥Provide &#x2F; Inject</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82%E5%92%8CBus"><span class="toc-text">å…„å¼Ÿç»„ä»¶ä¼ å‚å’ŒBus</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%9F%E5%8A%A9%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="toc-text">å€ŸåŠ©çˆ¶ç»„ä»¶ä¼ å‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Event-Bus"><span class="toc-text">Event Bus</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6%EF%BC%8C%E5%B1%80%E9%83%A8%E7%BB%84%E4%BB%B6%EF%BC%8C%E9%80%92%E5%BD%92%E7%BB%84%E4%BB%B6"><span class="toc-text">å…¨å±€ç»„ä»¶ï¼Œå±€éƒ¨ç»„ä»¶ï¼Œé€’å½’ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="toc-text">é…ç½®å…¨å±€ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E6%B3%A8%E5%86%8C%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="toc-text">æ‰¹é‡æ³¨å†Œå…¨å±€ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%B1%80%E9%83%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">é…ç½®å±€éƒ¨ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%80%92%E5%BD%92%E7%BB%84%E4%BB%B6"><span class="toc-text">é…ç½®é€’å½’ç»„ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-text">åŠ¨æ€ç»„ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E6%A7%BDslot"><span class="toc-text">æ’æ§½slot</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-text">åŒ¿åæ’æ§½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-text">å…·åæ’æ§½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-text">ä½œç”¨åŸŸæ’æ§½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E6%8F%92%E6%A7%BD"><span class="toc-text">åŠ¨æ€æ’æ§½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E5%AD%90%E7%BB%84%E4%BB%B6%E6%9A%B4%E9%9C%B2%E6%8F%92%E6%A7%BD"><span class="toc-text">ä»å­ç»„ä»¶æš´éœ²æ’æ§½</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6-amp-%E4%BB%A3%E7%A0%81%E5%88%86%E5%8C%85-amp-suspense"><span class="toc-text">å¼‚æ­¥ç»„ä»¶&amp;ä»£ç åˆ†åŒ…&amp;suspense</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6"><span class="toc-text">å¼‚æ­¥ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#suspense"><span class="toc-text">suspense</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Teleport%E4%BC%A0%E9%80%81%E7%BB%84%E4%BB%B6"><span class="toc-text">Teleportä¼ é€ç»„ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#keep-alive%E7%BC%93%E5%AD%98%E7%BB%84%E4%BB%B6"><span class="toc-text">keep-aliveç¼“å­˜ç»„ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#transition%E5%8A%A8%E7%94%BB%E7%BB%84%E4%BB%B6"><span class="toc-text">transitionåŠ¨ç”»ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%B8%A1%E7%9A%84%E7%B1%BB%E5%90%8D"><span class="toc-text">è¿‡æ¸¡çš„ç±»å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%87%E6%B8%A1-class-%E7%B1%BB%E5%90%8D"><span class="toc-text">è‡ªå®šä¹‰è¿‡æ¸¡ class ç±»å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#transition-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F8%E4%B8%AA"><span class="toc-text">transition ç”Ÿå‘½å‘¨æœŸ8ä¸ª</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#appear"><span class="toc-text">appear</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#transition-group%E8%BF%87%E5%BA%A6%E5%88%97%E8%A1%A8"><span class="toc-text">transition-groupè¿‡åº¦åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E7%9A%84%E7%A7%BB%E5%8A%A8%E8%BF%87%E6%B8%A1"><span class="toc-text">åˆ—è¡¨çš„ç§»åŠ¨è¿‡æ¸¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E8%BF%87%E6%B8%A1"><span class="toc-text">çŠ¶æ€è¿‡æ¸¡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5v-model"><span class="toc-text">æ·±å…¥v-model</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E5%A4%9A%E4%B8%AA%E6%A1%88%E4%BE%8B"><span class="toc-text">ç»‘å®šå¤šä¸ªæ¡ˆä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-text">è‡ªå®šä¹‰ä¿®é¥°ç¬¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4directive-%E5%B1%9E%E4%BA%8E%E7%A0%B4%E5%9D%8F%E6%80%A7%E6%9B%B4%E6%96%B0"><span class="toc-text">è‡ªå®šä¹‰æŒ‡ä»¤directive(å±äºç ´åæ€§æ›´æ–°)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue3%E6%8C%87%E4%BB%A4%E7%9A%84%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0"><span class="toc-text">vue3æŒ‡ä»¤çš„é’©å­å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8setup%E5%86%85%E5%AE%9A%E4%B9%89%E5%B1%80%E9%83%A8%E6%8C%87%E4%BB%A4"><span class="toc-text">åœ¨setupå†…å®šä¹‰å±€éƒ¨æŒ‡ä»¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3"><span class="toc-text">ç”Ÿå‘½å‘¨æœŸé’©å­å‚æ•°è¯¦è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%AE%80%E5%86%99"><span class="toc-text">å‡½æ•°ç®€å†™</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89Hooks"><span class="toc-text">è‡ªå®šä¹‰Hooks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0%E5%92%8C%E5%8F%98%E9%87%8F"><span class="toc-text">Vue3å®šä¹‰å…¨å±€å‡½æ•°å’Œå˜é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#globalProperties"><span class="toc-text">globalProperties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-text">è¿‡æ»¤å™¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99Vue3%E6%8F%92%E4%BB%B6"><span class="toc-text">ç¼–å†™Vue3æ’ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-use-%E6%BA%90%E7%A0%81%E6%89%8B%E5%86%99"><span class="toc-text">Vue use æºç æ‰‹å†™</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scoped%E5%92%8C%E6%A0%B7%E5%BC%8F-%E7%A9%BF%E9%80%8F"><span class="toc-text">Scopedå’Œæ ·å¼ ç©¿é€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#css-Style%E5%AE%8C%E6%95%B4%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-text">css Styleå®Œæ•´æ–°ç‰¹æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E6%A7%BD%E9%80%89%E6%8B%A9%E5%99%A8-slotted"><span class="toc-text">æ’æ§½é€‰æ‹©å™¨(slotted)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E9%80%89%E6%8B%A9%E5%99%A8"><span class="toc-text">å…¨å±€é€‰æ‹©å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81-CSS"><span class="toc-text">åŠ¨æ€ CSS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mitt"><span class="toc-text">Mitt</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#main-ts-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">main.ts åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E9%80%9A%E8%BF%87emit%E6%B4%BE%E5%8F%91%EF%BC%8C-on-%E6%96%B9%E6%B3%95%E6%B7%BB%E5%8A%A0%E4%BA%8B%E4%BB%B6%EF%BC%8Coff-%E6%96%B9%E6%B3%95%E7%A7%BB%E9%99%A4%EF%BC%8Cclear-%E6%B8%85%E7%A9%BA%E6%89%80%E6%9C%89"><span class="toc-text">ä½¿ç”¨æ–¹æ³•é€šè¿‡emitæ´¾å‘ï¼Œ on æ–¹æ³•æ·»åŠ äº‹ä»¶ï¼Œoff æ–¹æ³•ç§»é™¤ï¼Œclear æ¸…ç©ºæ‰€æœ‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E6%89%80%E6%9C%89%E4%BA%8B%E4%BB%B6%EF%BC%88-on-%E2%80%9C-%E2%80%9D-%EF%BC%89"><span class="toc-text">ç›‘å¬æ‰€æœ‰äº‹ä»¶ï¼ˆ on(â€œ*â€) ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E9%99%A4%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6%EF%BC%88off%EF%BC%89"><span class="toc-text">ç§»é™¤ç›‘å¬äº‹ä»¶ï¼ˆoffï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E7%A9%BA%E6%89%80%E6%9C%89%E7%9B%91%E5%90%AC%EF%BC%88clear%EF%BC%89"><span class="toc-text">æ¸…ç©ºæ‰€æœ‰ç›‘å¬ï¼ˆclearï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">ç¯å¢ƒå˜é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%A2%9D%E5%A4%96%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">é…ç½®é¢å¤–çš„ç¯å¢ƒå˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%BD%BF%E7%94%A8"><span class="toc-text">ç”Ÿäº§ç¯å¢ƒä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E6%83%B3%E5%9C%A8vite-config-ts-%E4%BD%BF%E7%94%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">å¦‚æœæƒ³åœ¨vite.config.ts ä½¿ç”¨ç¯å¢ƒå˜é‡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proxy%E8%B7%A8%E5%9F%9F"><span class="toc-text">Proxyè·¨åŸŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%B7%A8%E5%9F%9F"><span class="toc-text">ä»€ä¹ˆæ˜¯è·¨åŸŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F"><span class="toc-text">å¦‚ä½•è§£å†³è·¨åŸŸ</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Vue3-æ–°ç‰¹æ€§ä»‹ç»"><a href="#Vue3-æ–°ç‰¹æ€§ä»‹ç»" class="headerlink" title="Vue3 æ–°ç‰¹æ€§ä»‹ç»"></a>Vue3 æ–°ç‰¹æ€§ä»‹ç»</h2><h3 id="é‡å†™åŒå‘ç»‘å®š"><a href="#é‡å†™åŒå‘ç»‘å®š" class="headerlink" title="é‡å†™åŒå‘ç»‘å®š"></a>é‡å†™åŒå‘ç»‘å®š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">vue2</span><br><span class="line">åŸºäºObject.defineProperty()å®ç°</span><br><span class="line"></span><br><span class="line">vue3 åŸºäºProxy</span><br><span class="line">proxyä¸Object.defineProperty(obj, prop, desc)æ–¹å¼ç›¸æ¯”æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;ä¸¢æ‰éº»çƒ¦çš„å¤‡ä»½æ•°æ®</span><br><span class="line">&#x2F;&#x2F;çœå»for in å¾ªç¯</span><br><span class="line">&#x2F;&#x2F;å¯ä»¥ç›‘å¬æ•°ç»„å˜åŒ–</span><br><span class="line">&#x2F;&#x2F;ä»£ç æ›´ç®€åŒ–</span><br><span class="line">&#x2F;&#x2F;å¯ä»¥ç›‘å¬åŠ¨æ€æ–°å¢çš„å±æ€§ï¼›</span><br><span class="line">&#x2F;&#x2F;å¯ä»¥ç›‘å¬åˆ é™¤çš„å±æ€§ ï¼›</span><br><span class="line">&#x2F;&#x2F;å¯ä»¥ç›‘å¬æ•°ç»„çš„ç´¢å¼•å’Œ length å±æ€§ï¼›</span><br><span class="line">let proxyObj &#x3D; new Proxy(obj,&#123;</span><br><span class="line">    get : function (target,prop) &#123;</span><br><span class="line">        return prop in target ? target[prop] : 0</span><br><span class="line">    &#125;,</span><br><span class="line">    set : function (target,prop,value) &#123;</span><br><span class="line">        target[prop] &#x3D; 888;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Vue3-ä¼˜åŒ–Vdom"><a href="#Vue3-ä¼˜åŒ–Vdom" class="headerlink" title="Vue3 ä¼˜åŒ–Vdom"></a>Vue3 ä¼˜åŒ–Vdom</h2><p><strong>åœ¨Vue2ä¸­,æ¯æ¬¡æ›´æ–°diff,éƒ½æ˜¯å…¨é‡å¯¹æ¯”,Vue3åˆ™åªå¯¹æ¯”å¸¦æœ‰æ ‡è®°çš„,è¿™æ ·å¤§å¤§å‡å°‘äº†éåŠ¨æ€å†…å®¹çš„å¯¹æ¯”æ¶ˆè€—</strong></p>
<h3 id="patch-flag-ä¼˜åŒ–é™æ€æ ‘"><a href="#patch-flag-ä¼˜åŒ–é™æ€æ ‘" class="headerlink" title="patch flag ä¼˜åŒ–é™æ€æ ‘"></a>patch flag ä¼˜åŒ–é™æ€æ ‘</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;Hello world!&lt;&#x2F;span&gt;</span><br><span class="line">&lt;span&gt;Hello world!&lt;&#x2F;span&gt;</span><br><span class="line">&lt;span&gt;Hello world!&lt;&#x2F;span&gt;</span><br><span class="line">&lt;span&gt;Hello world!&lt;&#x2F;span&gt;</span><br><span class="line">&lt;span&gt;&#123;&#123;msg&#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">&lt;span&gt;Hello world!&lt;&#x2F;span&gt;</span><br><span class="line">&lt;span&gt;Hello world! &lt;&#x2F;span&gt;</span><br></pre></td></tr></table></figure>

<p><code>Vue3</code> ç¼–è¯‘åçš„ <code>Vdom</code> æ˜¯è¿™ä¸ªæ ·å­çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export function render(_ctxï¼Œ_cacheï¼Œ$propsï¼Œ$setupï¼Œ$dataï¼Œ$options)&#123;return (_openBlock(),_createBlock(_Fragment,nullï¼Œ[</span><br><span class="line">_createvNode( &quot;span&quot;, null,&quot;Hello world ! &quot;),</span><br><span class="line">_createvNode( &quot;span&quot;,nullï¼Œ&quot;Hello world! &quot;),</span><br><span class="line">_createvNode( &quot;span&quot;ï¼Œnullï¼Œ&quot;Hello world! &quot;),</span><br><span class="line">_createvNode( &quot;span&quot;, nullï¼Œ&quot;Hello world! &quot;),</span><br><span class="line">_createVNode(&quot;span&quot;, nullï¼Œ_toDisplaystring(_ctx.msg)ï¼Œ1&#x2F;* TEXT *&#x2F;)ï¼Œ</span><br><span class="line">_createvNode( &quot;span&quot;, nullï¼Œ&quot;Hello world! &quot;),</span><br><span class="line">_createvNode( &quot;span&quot;, nullï¼Œ&quot;Hello world! &quot;)]ï¼Œ64&#x2F;*STABLE_FRAGMENT *&#x2F;))</span><br></pre></td></tr></table></figure>

<p>æ–°å¢äº† patch flag æ ‡è®°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">TEXT &#x3D; 1 &#x2F;&#x2F; åŠ¨æ€æ–‡æœ¬èŠ‚ç‚¹</span><br><span class="line">CLASS&#x3D;1&lt;&lt;1,1 &#x2F;&#x2F; 2&#x2F;&#x2F;åŠ¨æ€class</span><br><span class="line">STYLE&#x3D;1&lt;&lt;2ï¼Œ&#x2F;&#x2F; 4 &#x2F;&#x2F;åŠ¨æ€style</span><br><span class="line">PROPS&#x3D;1&lt;&lt;3,&#x2F;&#x2F; 8 &#x2F;&#x2F;åŠ¨æ€å±æ€§ï¼Œä½†ä¸åŒ…å«ç±»åå’Œæ ·å¼</span><br><span class="line">FULLPR0PS&#x3D;1&lt;&lt;4,&#x2F;&#x2F; 16 &#x2F;&#x2F;å…·æœ‰åŠ¨æ€keyå±æ€§ï¼Œå½“keyæ”¹å˜æ—¶ï¼Œéœ€è¦è¿›è¡Œå®Œæ•´çš„diffæ¯”è¾ƒã€‚</span><br><span class="line">HYDRATE_ EVENTS &#x3D; 1 &lt;&lt; 5ï¼Œ&#x2F;&#x2F; 32 &#x2F;&#x2F;å¸¦æœ‰ç›‘å¬äº‹ä»¶çš„èŠ‚ç‚¹</span><br><span class="line">STABLE FRAGMENT &#x3D; 1 &lt;&lt; 6, &#x2F;&#x2F; 64 &#x2F;&#x2F;ä¸€ä¸ªä¸ä¼šæ”¹å˜å­èŠ‚ç‚¹é¡ºåºçš„fragment</span><br><span class="line">KEYED_ FRAGMENT &#x3D; 1 &lt;&lt; 7, &#x2F;&#x2F; 128 &#x2F;&#x2F;å¸¦æœ‰keyå±æ€§çš„fragment æˆ–éƒ¨åˆ†å­å­—èŠ‚æœ‰key</span><br><span class="line">UNKEYED FRAGMENT &#x3D; 1&lt;&lt; 8, &#x2F;&#x2F; 256 &#x2F;&#x2F;å­èŠ‚ç‚¹æ²¡æœ‰key çš„fragment</span><br><span class="line">NEED PATCH &#x3D; 1 &lt;&lt; 9, &#x2F;&#x2F; 512 &#x2F;&#x2F;ä¸€ä¸ªèŠ‚ç‚¹åªä¼šè¿›è¡Œépropsæ¯”è¾ƒ</span><br><span class="line">DYNAMIC_SLOTS &#x3D; 1 &lt;&lt; 10 &#x2F;&#x2F; 1024 &#x2F;&#x2F; åŠ¨æ€slot</span><br><span class="line">HOISTED &#x3D; -1 &#x2F;&#x2F; é™æ€èŠ‚ç‚¹</span><br><span class="line">BALL &#x3D; -2</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å‘ç°åˆ›å»ºåŠ¨æ€ dom å…ƒç´ çš„æ—¶å€™ï¼ŒVdom é™¤äº†æ¨¡æ‹Ÿå‡ºæ¥äº†å®ƒçš„åŸºæœ¬ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜ç»™å®ƒåŠ äº†ä¸€ä¸ªæ ‡è®°ï¼š 1 /* TEXT */</p>
<p>è¿™ä¸ªæ ‡è®°å°±å«åš patch flagï¼ˆè¡¥ä¸æ ‡è®°ï¼‰</p>
<p>patch flag çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œå½“ä½ çš„ diff ç®—æ³•èµ°åˆ° _createBlock å‡½æ•°çš„æ—¶å€™ï¼Œä¼šå¿½ç•¥æ‰€æœ‰çš„é™æ€èŠ‚ç‚¹ï¼Œåªå¯¹æœ‰æ ‡è®°çš„åŠ¨æ€èŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”ï¼Œè€Œä¸”åœ¨å¤šå±‚çš„åµŒå¥—ä¸‹ä¾ç„¶æœ‰æ•ˆã€‚</p>
<p>å°½ç®¡ JavaScript åš Vdom çš„å¯¹æ¯”å·²ç»éå¸¸çš„å¿«ï¼Œä½†æ˜¯ patch flag çš„å‡ºç°è¿˜æ˜¯è®© Vue3 çš„ Vdom çš„æ€§èƒ½å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ï¼Œå°¤å…¶æ˜¯åœ¨é’ˆå¯¹å¤§ç»„ä»¶çš„æ—¶å€™ã€‚</p>
<h2 id="Vue3-Fragment"><a href="#Vue3-Fragment" class="headerlink" title="Vue3 Fragment"></a>Vue3 Fragment</h2><p>vue3 å…è®¸æˆ‘ä»¬æ”¯æŒå¤šä¸ªæ ¹èŠ‚ç‚¹(vueå°†ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„FragmentèŠ‚ç‚¹)ã€åŒæ—¶æ”¯æŒrender JSX å†™æ³•</p>
<h2 id="Refå…¨å®¶æ¡¶"><a href="#Refå…¨å®¶æ¡¶" class="headerlink" title="Refå…¨å®¶æ¡¶"></a>Refå…¨å®¶æ¡¶</h2><h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><p>ç»‘å®šæ™®é€šçš„æ•°æ®ç±»å‹ï¼Œå¦‚æœç”¨refå»ç»‘å®šå¯¹è±¡ æˆ–è€… æ•°ç»„ ç­‰å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œæºç é‡Œé¢å…¶å®ä¹Ÿæ˜¯ å»è°ƒç”¨reactive</p>
<p>æ¥å—ä¸€ä¸ªå†…éƒ¨å€¼å¹¶è¿”å›ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%93%8D%E5%BA%94%E5%BC%8F&spm=1001.2101.3001.7020">å“åº”å¼</a>ä¸”å¯å˜çš„ ref å¯¹è±¡ã€‚ref å¯¹è±¡ä»…æœ‰ä¸€ä¸ª <code>.value</code> propertyï¼ŒæŒ‡å‘è¯¥å†…éƒ¨å€¼ã€‚</p>
<h3 id="isRef"><a href="#isRef" class="headerlink" title="isRef"></a>isRef</h3><p>åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸€ä¸ªrefå¯¹è±¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref, Ref,isRef &#125; from &#39;vue&#39;</span><br><span class="line">let message: Ref&lt;string | number&gt; &#x3D; ref(&quot;æˆ‘æ˜¯message&quot;)</span><br><span class="line">let notRef:number &#x3D; 123</span><br><span class="line">const changeMsg &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  message.value &#x3D; &quot;change msg&quot;</span><br><span class="line"></span><br><span class="line">  console.log(isRef(message)); &#x2F;&#x2F;true</span><br><span class="line">  console.log(isRef(notRef)); &#x2F;&#x2F;false</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="shallowRefã€triggerRef"><a href="#shallowRefã€triggerRef" class="headerlink" title="shallowRefã€triggerRef"></a>shallowRefã€triggerRef</h3><p>shallowRef()å­˜åœ¨çš„æ„ä¹‰ï¼šå°†æœ€ç»ˆçš„ç»“æœè¾“å‡ºåˆ°è§†å›¾ï¼ŒèŠ‚çœä¸€äº›ä¸å¿…è¦çš„è¾“å‡ºã€‚</p>
<p><strong>shallowRefæ˜¯æµ…å±‚å“åº”å¼æ•°æ®ï¼Œå³ï¼šä¿®æ”¹.valueå€¼æ—¶ä¼šæ›´æ–°è§†å›¾ã€‚è€Œä¿®æ”¹å…·ä½“å±æ€§å€¼æ—¶ï¼Œä¸ä¼šæ›´æ–°è§†å›¾ã€‚</strong></p>
<p>triggerRef  å¼ºåˆ¶æ›´æ–°é¡µé¢DOM</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1ã€shallowRef() å‡½æ•°æ˜¯æµ…å±‚å“åº”ï¼Œåªæœ‰å¯¹valueæ•´ä½“ä¿®æ”¹ï¼Œæ‰èƒ½æ›´æ–°åˆ°è§†å›¾å±‚ã€‚</span><br><span class="line">2ã€å¯¹å±æ€§å€¼çš„ä¿®æ”¹æ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯ä¸æ›´æ–°åˆ°è§†å›¾å±‚ã€‚</span><br><span class="line">3ã€å¯¹å±æ€§å€¼ä¿®æ”¹ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡triggerRef()å‡½æ•°æ‰‹åŠ¨æ›´æ–°åˆ°è§†å›¾ã€‚</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å®šä¹‰shallowRefå˜é‡</span><br><span class="line">const state &#x3D; shallowRef(&#123; count: 1 &#125;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ•´ä½“ä¿®æ”¹å€¼ï¼ˆå³.valueï¼‰ï¼Œå…¶templateå†…çš„è§†å›¾ä¹Ÿä¼šæ›´æ–°ï¼</span><br><span class="line">state.value &#x3D; &#123; count: 2 &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ä¿®æ”¹å±æ€§å€¼æ—¶ï¼Œå…¶templateå†…çš„è§†å›¾ä¸ä¼šæ›´æ–°ï¼ä½†å¹¶ä¸ä»£è¡¨å…¶å€¼æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œä»…ä»…æ˜¯è§†å›¾æ²¡æ›´æ–°</span><br><span class="line">state.value.count &#x3D; 2</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç”¨triggerRefå‡½æ•°æ‰‹åŠ¨æ›´æ–°è§†å›¾</span><br><span class="line">triggerRef(state)</span><br></pre></td></tr></table></figure>

<h3 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a>customRef</h3><p>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶ã€‚</p>
<p>customRef æ˜¯ä¸ªå·¥å‚å‡½æ•°è¦æ±‚æˆ‘ä»¬è‡ªå®šä¹‰çš„ <code>ref</code> ä¸­è¿”å›ä¸€ä¸ª <code>customRef</code>ï¼Œè€Œ <code>customRef</code> ä¹Ÿè¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”å®ç° get å’Œ set ï¼Œé€‚åˆå»åšé˜²æŠ–ä¹‹ç±»çš„</p>
<p> customRefçš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ç”¨äºè¿½è¸ªçš„ track ä¸ç”¨äºè§¦å‘å“åº”çš„ trigger</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> </span><br><span class="line">  &lt;div ref&#x3D;&quot;div&quot;&gt;å°æ»¡Ref&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; name &#125;&#125;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;button @click&#x3D;&quot;change&quot;&gt;ä¿®æ”¹ customRef&lt;&#x2F;button&gt;</span><br><span class="line"> </span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import &#123; ref, reactive, onMounted, shallowRef, customRef &#125; from &#39;vue&#39;</span><br><span class="line"> </span><br><span class="line">function myRef&lt;T &#x3D; any&gt;(value: T) &#123;</span><br><span class="line">  let timer:any;</span><br><span class="line">  return customRef((track, trigger) &#x3D;&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        track()</span><br><span class="line">        return value</span><br><span class="line">      &#125;,</span><br><span class="line">      set(newVal) &#123;</span><br><span class="line">        clearTimeout(timer)</span><br><span class="line">        timer &#x3D;  setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">          console.log(&#39;è§¦å‘äº†set&#39;)</span><br><span class="line">          value &#x3D; newVal</span><br><span class="line">          trigger()</span><br><span class="line">        &#125;,500)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">const name &#x3D; myRef&lt;string&gt;(&#39;å°æ»¡&#39;)</span><br><span class="line"> </span><br><span class="line">const change &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  name.value &#x3D; &#39;å¤§æ»¡&#39;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Reactiveå…¨å®¶æ¡¶"><a href="#Reactiveå…¨å®¶æ¡¶" class="headerlink" title="Reactiveå…¨å®¶æ¡¶"></a>Reactiveå…¨å®¶æ¡¶</h2><h3 id="reactive"><a href="#reactive" class="headerlink" title="reactive"></a><code>reactive</code></h3><p><strong>reactive æºç çº¦æŸäº†æˆ‘ä»¬çš„ç±»å‹ï¼Œç”¨æ¥ç»‘å®šå¤æ‚çš„æ•°æ®ç±»å‹ ä¾‹å¦‚ å¯¹è±¡ æ•°ç»„</strong></p>
<p>ä½¿ç”¨reactive å»ä¿®æ”¹å€¼æ— é¡».value</p>
<p>reactive åŸºç¡€ç”¨æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123; reactive &#125; from &#39;vue&#39;</span><br><span class="line">let person &#x3D; reactive(&#123;</span><br><span class="line">   name:&quot;å°æ»¡&quot;</span><br><span class="line">&#125;)</span><br><span class="line">person.name &#x3D; &quot;å¤§æ»¡&quot;</span><br></pre></td></tr></table></figure>

<p>æ•°ç»„å¼‚æ­¥èµ‹å€¼é—®é¢˜</p>
<p>è¿™æ ·èµ‹å€¼é¡µé¢æ˜¯ä¸ä¼šå˜åŒ–çš„å› ä¸ºä¼šè„±ç¦»å“åº”å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let person &#x3D; reactive&lt;number[]&gt;([])</span><br><span class="line">setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">  person &#x3D; [1, 2, 3]</span><br><span class="line">  console.log(person);</span><br><span class="line">  </span><br><span class="line">&#125;,1000)</span><br></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆ1  ä½¿ç”¨push</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; reactive &#125; from &#39;vue&#39;</span><br><span class="line">let person &#x3D; reactive&lt;number[]&gt;([])</span><br><span class="line">setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">  const arr &#x3D; [1, 2, 3]</span><br><span class="line">  person.push(...arr)</span><br><span class="line">  console.log(person);</span><br><span class="line">  </span><br><span class="line">&#125;,1000)</span><br></pre></td></tr></table></figure>

<p>æ–¹æ¡ˆ2  åŒ…è£¹ä¸€å±‚å¯¹è±¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">type Person &#x3D; &#123;</span><br><span class="line">  list?:Array&lt;number&gt;</span><br><span class="line">&#125;</span><br><span class="line">let person &#x3D; reactive&lt;Person&gt;(&#123;</span><br><span class="line">   list:[]</span><br><span class="line">&#125;)</span><br><span class="line">setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">  const arr &#x3D; [1, 2, 3]</span><br><span class="line">  person.list &#x3D; arr;</span><br><span class="line">  console.log(person);</span><br><span class="line">&#125;,1000)</span><br></pre></td></tr></table></figure>

<h3 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h3><p>å–å¾—ä¸€ä¸ªå¯¹è±¡ï¼ˆååº”æ€§æˆ–æ™®é€šï¼‰æˆ–refå¹¶è¿”å›ä¸€ä¸ªåªè¯»ä»£ç†ã€‚è®¿é—®çš„ä»»ä½•åµŒå¥—å±æ€§ä¹Ÿå°†æ˜¯åªè¯»çš„ã€‚<br>ä¼ å…¥æ™®é€šå¯¹è±¡ç­‰è¿”å›åªè¯»ä»£ç†ã€‚<br>ä¼ å…¥æ™®é€šæ•°å€¼æˆ–å­—ç¬¦ä¸²ä¸èƒ½å˜æˆåªè¯»ï¼Œä¾‹å¦‚ readonly(â€˜abcâ€™)</p>
<p>å¯ç»“åˆProvide/inject ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const original &#x3D; reactive(&#123; count: 0 &#125;)</span><br><span class="line"></span><br><span class="line">const copy &#x3D; readonly(original)</span><br><span class="line"></span><br><span class="line">watchEffect(() &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; ååº”æ€§è·Ÿè¸ª</span><br><span class="line">  console.log(copy.count)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ”¹å˜ original ä¼šè§¦å‘è§‚å¯Ÿcopyçš„watcheræ‰§è¡Œå…¶å‡½æ•°å›è°ƒ</span><br><span class="line">original.count++</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ”¹å˜ copy å°†ä¼šå¤±è´¥å¹¶ä¸”åœ¨æ§åˆ¶å°è¿”å›ä¸€ä¸ªè­¦å‘Š</span><br><span class="line">copy.count++ &#x2F;&#x2F; warning!</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a>shallowReactive</h3><p>åªèƒ½å¯¹æµ…å±‚çš„æ•°æ®ï¼ˆå¯¹è±¡ç¬¬ä¸€å±‚ï¼‰ å¦‚æœæ˜¯æ·±å±‚çš„æ•°æ®åªä¼šæ”¹å˜å€¼ ä¸ä¼šæ”¹å˜è§†å›¾</p>
<h2 id="toç³»åˆ—å…¨å®¶æ¡¶"><a href="#toç³»åˆ—å…¨å®¶æ¡¶" class="headerlink" title="toç³»åˆ—å…¨å®¶æ¡¶"></a>toç³»åˆ—å…¨å®¶æ¡¶</h2><h3 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a>toRef</h3><ul>
<li>toRefæ˜¯å°†å¯¹è±¡ä¸­çš„æŸä¸ªå€¼è½¬åŒ–ä¸ºå“åº”å¼æ•°æ® toRef(obj,key)</li>
<li>æ³¨æ„ç‚¹ï¼šå°±æ˜¯ toRef ä¿®æ”¹çš„å€¼ï¼Œåªèƒ½ä¿®æ”¹åŸå§‹å¯¹è±¡ä¸º å“åº”å¼å¯¹è±¡ï¼ŒtoReå¦‚æœåŸå§‹å¯¹è±¡æ˜¯éå“åº”å¼çš„å°±ä¸ä¼šæ›´æ–°è§†å›¾ æ•°æ®æ˜¯ä¼šå˜çš„</li>
</ul>
<h3 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs"></a>toRefs</h3><p>å¯ä»¥å¸®æˆ‘ä»¬æ‰¹é‡åˆ›å»ºrefå¯¹è±¡ä¸»è¦æ˜¯æ–¹ä¾¿æˆ‘ä»¬è§£æ„ä½¿ç”¨</p>
<p>å¯¹å¯¹è±¡è§£æ„æ—¶ï¼Œè§£æ„å‡ºæ¥çš„å€¼ä¸ºéå“åº”å¼æ•°æ®ï¼Œä½†ä½¿ç”¨ toRefs å®šä¹‰å è¿™äº›è¢«è§£æ„å‡ºæ¥çš„å€¼ ä¸ºå“åº”å¼æ•°æ®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123; reactive, toRefs &#125; from &#39;vue&#39;</span><br><span class="line">const obj &#x3D; reactive(&#123;</span><br><span class="line">   foo: 1,</span><br><span class="line">   bar: 1</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">let &#123; foo, bar &#125; &#x3D; toRefs(obj)</span><br><span class="line"> </span><br><span class="line">foo.value++</span><br><span class="line">console.log(foo, bar);</span><br></pre></td></tr></table></figure>

<h3 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a>toRaw</h3><p>å°†å“åº”å¼å¯¹è±¡è½¬åŒ–ä¸ºæ™®é€šå¯¹è±¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123; reactive, toRaw &#125; from &#39;vue&#39;</span><br><span class="line">const obj &#x3D; reactive(&#123;</span><br><span class="line">   foo: 1,</span><br><span class="line">   bar: 1</span><br><span class="line">&#125;)</span><br><span class="line">const state &#x3D; toRaw(obj)</span><br><span class="line">&#x2F;&#x2F; å“åº”å¼å¯¹è±¡è½¬åŒ–ä¸ºæ™®é€šå¯¹è±¡</span><br><span class="line">const change &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">   console.log(obj, state);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="computedç”¨æ³•"><a href="#computedç”¨æ³•" class="headerlink" title="computedç”¨æ³•"></a>computedç”¨æ³•</h2><p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7&spm=1001.2101.3001.7020">è®¡ç®—å±æ€§</a>å°±æ˜¯å½“ä¾èµ–çš„å±æ€§çš„å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘ä»–çš„æ›´æ”¹ï¼Œå¦‚æœä¾èµ–çš„å€¼ï¼Œä¸å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯ç¼“å­˜ä¸­çš„å±æ€§å€¼ã€‚</p>
<p>1 å‡½æ•°å½¢å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let price &#x3D; ref(0)&#x2F;&#x2F;$0 </span><br><span class="line">let m &#x3D; computed&lt;string&gt;(()&#x3D;&gt;&#123;</span><br><span class="line">   return &#96;$&#96; + price.value</span><br><span class="line">&#125;)</span><br><span class="line">price.value &#x3D; 500</span><br></pre></td></tr></table></figure>

<p>2 å¯¹è±¡å½¢å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let price &#x3D; ref&lt;number | string&gt;(1)&#x2F;&#x2F;$0</span><br><span class="line">let mul &#x3D; computed(&#123;</span><br><span class="line">   get: () &#x3D;&gt; &#123;</span><br><span class="line">      return price.value</span><br><span class="line">   &#125;,</span><br><span class="line">   set: (value) &#x3D;&gt; &#123;</span><br><span class="line">      price.value &#x3D; &#39;set&#39; + value</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br><span class="line">const changeMul &#x3D; ()&#x3D;&gt; &#123;</span><br><span class="line">    mul.value &#x3D; &#39;***&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="watchä¾¦å¬å™¨"><a href="#watchä¾¦å¬å™¨" class="headerlink" title="watchä¾¦å¬å™¨"></a>watchä¾¦å¬å™¨</h2><p><code>watch</code> éœ€è¦ä¾¦å¬ç‰¹å®šçš„æ•°æ®æºï¼Œå¹¶åœ¨å•ç‹¬çš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œå‰¯ä½œç”¨</p>
<p>watchç¬¬ä¸€ä¸ªå‚æ•°ç›‘å¬æº</p>
<p>watchç¬¬äºŒä¸ªå‚æ•°å›è°ƒå‡½æ•°cbï¼ˆnewVal,oldValï¼‰</p>
<p>watchç¬¬ä¸‰ä¸ªå‚æ•°ä¸€ä¸ªoptionsé…ç½®é¡¹æ˜¯ä¸€ä¸ªå¯¹è±¡{</p>
<p>â€‹    <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=immediate&spm=1001.2101.3001.7020">immediate</a>:true //æ˜¯å¦ç«‹å³è°ƒç”¨ä¸€æ¬¡</p>
<p>â€‹    deep:true //æ˜¯å¦å¼€å¯<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%B7%B1%E5%BA%A6%E7%9B%91%E5%90%AC&spm=1001.2101.3001.7020">æ·±åº¦ç›‘å¬</a></p>
<p>}</p>
<p>ç›‘å¬Ref</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">let message &#x3D; ref(&#123;</span><br><span class="line">    nav:&#123;</span><br><span class="line">        bar:&#123;</span><br><span class="line">            name:&quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">watch(message, (newVal, oldVal) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&#39;æ–°çš„å€¼----&#39;, newVal);</span><br><span class="line">    console.log(&#39;æ—§çš„å€¼----&#39;, oldVal);</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    immediate:true,</span><br><span class="line">    deep:true</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ç›‘å¬å¤šä¸ªref æ³¨æ„å˜æˆæ•°ç»„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let message &#x3D; ref(&#39;&#39;)</span><br><span class="line">let message2 &#x3D; ref(&#39;&#39;)</span><br><span class="line"> </span><br><span class="line">watch([message,message2], (newVal, oldVal) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&#39;æ–°çš„å€¼----&#39;, newVal);</span><br><span class="line">    console.log(&#39;æ—§çš„å€¼----&#39;, oldVal);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ç›‘å¬Reactive</p>
<p>ä½¿ç”¨reactiveç›‘å¬æ·±å±‚å¯¹è±¡å¼€å¯å’Œä¸å¼€å¯deep æ•ˆæœä¸€æ ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref, watch ,reactive&#125; from &#39;vue&#39;</span><br><span class="line"> </span><br><span class="line">let message &#x3D; reactive(&#123;</span><br><span class="line">    nav:&#123;</span><br><span class="line">        bar:&#123;</span><br><span class="line">            name:&quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">watch(message, (newVal, oldVal) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&#39;æ–°çš„å€¼----&#39;, newVal);</span><br><span class="line">    console.log(&#39;æ—§çš„å€¼----&#39;, oldVal);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ç›‘å¬reactive å•ä¸€å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let message &#x3D; reactive(&#123;</span><br><span class="line">    name:&quot;&quot;,</span><br><span class="line">    name2:&quot;&quot;</span><br><span class="line">&#125;)</span><br><span class="line">watch(()&#x3D;&gt;message.name, (newVal, oldVal) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&#39;æ–°çš„å€¼----&#39;, newVal);</span><br><span class="line">    console.log(&#39;æ—§çš„å€¼----&#39;, oldVal);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="watchEffecté«˜çº§ä¾¦å¬å™¨"><a href="#watchEffecté«˜çº§ä¾¦å¬å™¨" class="headerlink" title="watchEffecté«˜çº§ä¾¦å¬å™¨"></a>watchEffecté«˜çº§ä¾¦å¬å™¨</h2><p>ç«‹å³æ‰§è¡Œä¼ å…¥çš„ä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%93%8D%E5%BA%94%E5%BC%8F&spm=1001.2101.3001.7020">å“åº”å¼</a>è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨å…¶ä¾èµ–å˜æ›´æ—¶é‡æ–°è¿è¡Œè¯¥å‡½æ•°ã€‚</p>
<p>watchEffect æ¥æ”¶2ä¸ªå‚æ•° ï¼Œå¹¶ä¸”æœ‰è¿”å›ä¸€ä¸ª StopHandle å‡½æ•°ç”¨æ¥åœæ­¢ä¾¦å¬ã€‚<br>1ã€ç¬¬ä¸€ä¸ªå‚æ•°ï¼šï¼ˆå¿…ä¼ ï¼‰<br>effect å‡½æ•°ï¼Œæ”¶é›†ä¾èµ–ï¼Œå¹¶ä¸”ç»„ä»¶åˆå§‹åŒ–æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡;<br>å¹¶ä¸” effect å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ª onInvalidate å‡½æ•°å‚æ•°ï¼Œè¯¥å‚æ•°æ‰§è¡Œå¹¶ä¼ å…¥ä¸€ä¸ª callback ï¼Œæ¯æ¬¡ç›‘å¬å›è°ƒæ‰§è¡Œå‰éƒ½ä¼šæ‰§è¡Œè¯¥ callbackã€‚<br>2ã€ç¬¬äºŒä¸ªå‚æ•°å¯¹è±¡ï¼ˆéå¿…ä¼ ï¼‰ï¼š flush ã€ onTrack ã€ onTrigger; </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">let count &#x3D; ref(0)</span><br><span class="line">let Cc &#x3D; computed(()&#x3D;&gt; count.value * 2)</span><br><span class="line">let obj &#x3D; reactive(&#123;</span><br><span class="line">  data:123,</span><br><span class="line">  inObj:&#123;d1:0&#125;</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">const stop &#x3D; watchEffect((onInvalidate) &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F;! ç«‹å³æ‰§è¡Œä¼ å…¥çš„å›è°ƒå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼è¿½è¸ªå…¶æ‰€æœ‰ä¾èµ–ï¼Œå¹¶åœ¨ä¾èµ–å˜æ›´æ—¶é‡æ–°è¿è¡Œè¯¥å›è°ƒå‡½æ•°ã€‚</span><br><span class="line">  console.log(Cc.value); &#x2F;&#x2F; æ³¨æ„ï¼Œå¦‚æœä¾èµ–æ˜¯ ref å’Œ computed å¯¹è±¡ï¼Œå¿…é¡»è¦.valueï¼Œå¦åˆ™å¹¶ä¸ä¼šè§†ä¸ºä¾èµ–</span><br><span class="line">  console.log(count.value);</span><br><span class="line">  console.log(obj.data); &#x2F;&#x2F; åŒç†ï¼Œreactiveæ•°æ®ä¹Ÿåªä¼šä¾¦å¬è§¦å‘äº†getçš„property(å±æ€§)</span><br><span class="line">  &#x2F;&#x2F;! æ³¨æ„é¦–æ¬¡æ‰§è¡Œå¹¶ä¸ä¼šæ‰§è¡ŒonInvalidate ï¼Œç¬¬äºŒæ¬¡å¼€å§‹æ‰ä¼šï¼</span><br><span class="line">  onInvalidate(()&#x3D;&gt;&#123;</span><br><span class="line">    &#x2F;&#x2F;! åœ¨å›è°ƒè§¦å‘å‰ä¼šè°ƒç”¨è¯¥å‡½æ•°ï¼Œå¹¶ä¸”stop()åœæ­¢ä¾¦å¬çš„æ—¶å€™ä¹Ÿä¼šè§¦å‘ä¸€æ¬¡ï¼</span><br><span class="line">    console.log(&#39;watchEffectçš„onInvalidate&#39;);</span><br><span class="line">  &#125;)</span><br><span class="line"> </span><br><span class="line">&#125;,&#123;</span><br><span class="line">  flush:&#39;pre&#39;, &#x2F;&#x2F; flush?: &#39;pre&#39; | &#39;post&#39; | &#39;sync&#39; &#x2F;&#x2F; é»˜è®¤ï¼š&#39;pre&#39;</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F;! è·Ÿè¸ªä¹‹å‰ä¼šè§¦å‘è¯¥å‡½æ•°ï¼Œæ”¶é›†äº†å¤šå°‘ä¸ªä¾èµ–å°±è§¦å‘å¤šå°‘æ¬¡ï¼è¿”å›å¯¹åº”ä¾èµ–ä¿¡æ¯</span><br><span class="line">  onTrack(e)&#123;console.log(e.target,&#39;onTrackè§¦å‘&#39;)&#125;, </span><br><span class="line"> </span><br><span class="line">  &#x2F;&#x2F;! è·Ÿä»–åå­—ä¸€æ ·ä¾èµ–æ›´æ”¹å°±è§¦å‘æ‰§è¡Œï¼Œè€Œä¸”æ˜¯åŒæ­¥çš„ï¼æ²¡æœ‰æ‰€è°“çš„ç¼“å†²å›è°ƒ</span><br><span class="line">  onTrigger(e)&#123;console.log(e.target,&#39;onTriggerè§¦å‘&#39;)&#125; </span><br><span class="line">&#125;)</span><br><span class="line">setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">  stop() &#x2F;&#x2F; åœæ­¢ä¾¦å¬ åˆ™è°ƒç”¨è¯¥è¿”å›å€¼å³å¯ </span><br><span class="line">&#125;, 1000*5);</span><br></pre></td></tr></table></figure>

<h3 id="æ¸…é™¤å‰¯ä½œç”¨-oninvalidate"><a href="#æ¸…é™¤å‰¯ä½œç”¨-oninvalidate" class="headerlink" title="æ¸…é™¤å‰¯ä½œç”¨ oninvalidate"></a>æ¸…é™¤å‰¯ä½œç”¨ oninvalidate</h3><p>åœ¨è§¦å‘ç›‘å¬ä¹‹å‰ä¼šè°ƒç”¨ä¸€ä¸ªå‡½æ•°å¯ä»¥å¤„ç†ä½ çš„é€»è¾‘ä¾‹å¦‚<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E9%98%B2%E6%8A%96&spm=1001.2101.3001.7020">é˜²æŠ–</a></p>
<ol>
<li>åœ¨å›è°ƒè§¦å‘å‰ä¼šè°ƒç”¨è¯¥å‡½æ•°</li>
<li>ä¾¦å¬å™¨è¢«åœæ­¢ (å¦‚æœåœ¨ <code>setup()</code> æˆ–ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¸­ä½¿ç”¨äº† <code>watchEffect</code>ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ä¼šè‡ªåŠ¨åœæ­¢ä¾¦å¬ã€‚)</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let message &#x3D; ref&lt;string&gt;(&#39;&#39;)</span><br><span class="line">let message2 &#x3D; ref&lt;string&gt;(&#39;&#39;)</span><br><span class="line"> watchEffect((oninvalidate) &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F;console.log(&#39;message&#39;, message.value);</span><br><span class="line">    oninvalidate(()&#x3D;&gt;&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;)</span><br><span class="line">    console.log(&#39;message2&#39;, message2.value);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="å‰¯ä½œç”¨åˆ·æ–°æ—¶æœº-flush-ä¸€èˆ¬ä½¿ç”¨post"><a href="#å‰¯ä½œç”¨åˆ·æ–°æ—¶æœº-flush-ä¸€èˆ¬ä½¿ç”¨post" class="headerlink" title="å‰¯ä½œç”¨åˆ·æ–°æ—¶æœº flush ä¸€èˆ¬ä½¿ç”¨post"></a>å‰¯ä½œç”¨åˆ·æ–°æ—¶æœº flush ä¸€èˆ¬ä½¿ç”¨post</h3><table>
<thead>
<tr>
<th align="left"></th>
<th align="left">pre</th>
<th align="left">sync</th>
<th align="left">post</th>
</tr>
</thead>
<tbody><tr>
<td align="left">æ›´æ–°æ—¶æœº</td>
<td align="left">ç»„ä»¶<strong>æ›´æ–°å‰</strong>æ‰§è¡Œ</td>
<td align="left">å¼ºåˆ¶æ•ˆæœå§‹ç»ˆåŒæ­¥è§¦å‘</td>
<td align="left">ç»„ä»¶<strong>æ›´æ–°å</strong>æ‰§è¡Œ</td>
</tr>
</tbody></table>
<p><strong>åœæ­¢è·Ÿè¸ª</strong></p>
<p>watchEffect è¿”å›ä¸€ä¸ªå‡½æ•° è°ƒç”¨ä¹‹åå°†åœæ­¢æ›´æ–°</p>
<p>ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¸­ä½¿ç”¨äº† <code>watchEffect</code>ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ä¹Ÿä¼šè‡ªåŠ¨åœæ­¢ä¾¦å¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const stop &#x3D;  watchEffect((oninvalidate) &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F;console.log(&#39;message&#39;, message.value);</span><br><span class="line">    oninvalidate(()&#x3D;&gt;&#123;</span><br><span class="line"> </span><br><span class="line">    &#125;)</span><br><span class="line">    console.log(&#39;message2&#39;, message2.value);</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    flush:&quot;post&quot;,</span><br><span class="line">    onTrigger () &#123;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#x2F;&#x2F; åœæ­¢è·Ÿè¸ª</span><br><span class="line">stop()</span><br></pre></td></tr></table></figure>



<h2 id="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h2><table>
<thead>
<tr>
<th align="left">é€‰é¡¹å¼ API</th>
<th align="left">Hook inside <code>setup</code></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>beforeCreate</code></td>
<td align="left">Not needed*</td>
</tr>
<tr>
<td align="left"><code>created</code></td>
<td align="left">Not needed*</td>
</tr>
<tr>
<td align="left"><code>beforeMount</code></td>
<td align="left"><code>onBeforeMount</code></td>
</tr>
<tr>
<td align="left"><code>mounted</code></td>
<td align="left"><code>onMounted</code></td>
</tr>
<tr>
<td align="left"><code>beforeUpdate</code></td>
<td align="left"><code>onBeforeUpdate</code></td>
</tr>
<tr>
<td align="left"><code>updated</code></td>
<td align="left"><code>onUpdated</code></td>
</tr>
<tr>
<td align="left"><code>beforeUnmount</code></td>
<td align="left"><code>onBeforeUnmount</code></td>
</tr>
<tr>
<td align="left"><code>unmounted</code></td>
<td align="left"><code>onUnmounted</code></td>
</tr>
<tr>
<td align="left"><code>errorCaptured</code></td>
<td align="left"><code>onErrorCaptured</code></td>
</tr>
<tr>
<td align="left"><code>renderTracked</code></td>
<td align="left"><code>onRenderTracked</code></td>
</tr>
<tr>
<td align="left"><code>renderTriggered</code></td>
<td align="left"><code>onRenderTriggered</code></td>
</tr>
<tr>
<td align="left"><code>activated</code></td>
<td align="left"><code>onActivated</code></td>
</tr>
<tr>
<td align="left"><code>deactivated</code></td>
<td align="left"><code>onDeactivated</code></td>
</tr>
</tbody></table>
<p>1  <code>onRenderTracked</code> ç›´è¯‘è¿‡æ¥å°±æ˜¯çŠ¶æ€è·Ÿè¸ªï¼Œä»–ä¼šè·Ÿè¸ªé¡µé¢ä¸Šæ‰€æœ‰çš„æ–¹æ³•è·Ÿå˜é‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬<code>return</code>è¿”å›çš„å±æ€§ä¸æ–¹æ³•ï¼Œå®ƒéƒ½ä¼šè¿›è¡Œè·Ÿè¸ªã€‚å½“é¡µé¢æœ‰<code>update</code>æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ª<code>event</code>å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ª<code>event</code>å¯¹è±¡æŸ¥çœ‹ç¨‹åºçš„é—®é¢˜æ‰€åœ¨ã€‚</p>
<p>2  <code>onRenderTriggered</code>ç›´è¯‘è¿‡æ¥æ˜¯çŠ¶æ€è§¦å‘ï¼Œå®ƒä¸ä¼šè·Ÿè¸ªæ¯ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯ç»™ä½ å˜åŒ–å€¼çš„ä¿¡æ¯ï¼Œå¹¶ä¸”æ–°å€¼å’Œæ—§å€¼éƒ½ä¼šç»™ä½ æ˜ç¡®çš„å±•ç¤ºå‡ºæ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–°å€¼newValueå’Œæ—§å€¼oldValueéƒ½ä¼šç»™ä½ æ˜ç¡®çš„å±•ç¤ºå‡ºæ¥ã€‚ä¸»è¦çš„å±æ€§ä»‹ç»</span><br><span class="line">key å“ªä¸ªå˜é‡å‘ç”Ÿäº†å˜åŒ–</span><br><span class="line">newValue æ›´æ–°åå˜é‡çš„å€¼</span><br><span class="line">oldValue æ›´æ–°å‰å˜é‡çš„å€¼</span><br><span class="line">target ç›®å‰é¡µé¢ä¸­çš„å“åº”å˜é‡å’Œå‡½æ•°</span><br></pre></td></tr></table></figure>

<p><strong>activated,deactivated</strong></p>
<p>activated,deactivatedè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸€å®šæ˜¯è¦åœ¨ä½¿ç”¨äº†keep-aliveç»„ä»¶åæ‰ä¼šæœ‰çš„ï¼Œå¦åˆ™åˆ™ä¸å­˜åœ¨å½“å¼•å…¥keep-aliveçš„æ—¶å€™ï¼Œé¡µé¢ç¬¬ä¸€æ¬¡è¿›å…¥ï¼Œé’©å­çš„è§¦å‘é¡ºåºcreated-&gt; mounted-&gt; activatedï¼Œé€€å‡ºæ—¶è§¦å‘deactivatedã€‚å½“å†æ¬¡è¿›å…¥ï¼ˆå‰è¿›æˆ–è€…åé€€ï¼‰æ—¶ï¼Œåªè§¦å‘activatedã€‚<br>ç»„ä»¶æ¯æ¬¡è¿›å»æ‰§è¡Œçš„æ–¹æ³•æ”¾åœ¨ activated ä¸­ï¼Œ activated ä¸­çš„ä¸ç®¡æ˜¯å¦éœ€è¦ç¼“å­˜å¤šä¼šæ‰§è¡Œã€‚</p>
<h2 id="VNode-hooks"><a href="#VNode-hooks" class="headerlink" title="VNode hooks"></a>VNode hooks</h2><p>åœ¨æ¯ä¸ªç»„ä»¶æˆ–HTMLæ ‡ç­¾ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›ç‰¹æ®Šçš„ï¼ˆæ–‡æ¡£æ²¡å†™çš„ï¼‰é’©å­ä½œä¸ºäº‹ä»¶ç›‘å¬å™¨ã€‚è¿™äº›é’©å­æœ‰ï¼š</p>
<ul>
<li><p>onVnodeBeforeMount</p>
</li>
<li><p>onVnodeMounted</p>
</li>
<li><p>onVnodeBeforeUpdate</p>
</li>
<li><p>onVnodeUpdated</p>
</li>
<li><p>onVnodeBeforeUnmount</p>
</li>
<li><p>onVnodeUnmounted</p>
<p>åœ¨ç»„ä»¶ä¸Šä½¿ç”¨<code>onVnodeMounted</code>ï¼Œå½“éœ€è¦åœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€äº›ä»£ç ï¼Œæˆ–è€…åœ¨æ›´æ–°æ—¶ä½¿ç”¨<code>onVnodeUpdated</code>è¿›è¡Œè°ƒè¯•ï¼Œå¯ä»¥ç¡®å®šçš„æ˜¯æ‰€æœ‰è¿™äº›é’©å­éƒ½èƒ½åœ¨æŸäº›æƒ…å†µä¸‹æ´¾ä¸Šç”¨åœºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#39;vue&#39;</span><br><span class="line"></span><br><span class="line">const count &#x3D; ref(0)</span><br><span class="line"></span><br><span class="line">function onMyComponentMounted() &#123;&#125;</span><br><span class="line"></span><br><span class="line">function divThatDisplaysCountWasUpdated() &#123;&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;MyComponent @vnodeMounted&#x3D;&quot;onMyComponentMounted&quot; &#x2F;&gt;</span><br><span class="line">  &lt;div @vnodeUpdated&#x3D;&quot;divThatDisplaysCountWasUpdated&quot;&gt;&#123;&#123; count &#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›é’©å­å‘å›è°ƒå‡½æ•°ä¼ é€’ä¸€äº›å‚æ•°ã€‚é™¤äº†<code>onVnodeBeforeUpdate</code>å’Œ<code>onVnodeUpdated</code>ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œå³å½“å‰çš„<code>VNode</code>å’Œä¹‹å‰çš„<code>VNode</code>ï¼Œå…¶å®ƒåªä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œå³å½“å‰çš„<code>VNode</code></p>
</li>
</ul>
<h2 id="çˆ¶å­ç»„ä»¶ä¼ å‚"><a href="#çˆ¶å­ç»„ä»¶ä¼ å‚" class="headerlink" title="çˆ¶å­ç»„ä»¶ä¼ å‚"></a>çˆ¶å­ç»„ä»¶ä¼ å‚</h2><h3 id="defineProps"><a href="#defineProps" class="headerlink" title="defineProps "></a><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=defineProps&spm=1001.2101.3001.7020">defineProps </a></h3><p>å­ç»„ä»¶æ¥å—å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶</span><br><span class="line">&lt;Menu :data&#x3D;&quot;data&quot;  title&#x3D;&quot;æˆ‘æ˜¯æ ‡é¢˜&quot;&gt;&lt;&#x2F;Menu&gt;</span><br><span class="line">å­ç»„ä»¶ tså¯ä»¥ä½¿ç”¨ä¼ é€’å­—é¢é‡ç±»å‹çš„çº¯ç±»å‹è¯­æ³•åšä¸ºå‚æ•°</span><br><span class="line">defineProps&lt;&#123;</span><br><span class="line">    title:string,</span><br><span class="line">    data:number[]</span><br><span class="line">&#125;&gt;()</span><br><span class="line">&#x2F;&#x2F; withDefaultsæ˜¯ä¸ªå‡½æ•°ä¹Ÿæ˜¯æ— é¡»å¼•å…¥å¼€ç®±å³ç”¨æ¥å—ä¸€ä¸ªpropså‡½æ•°ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡è®¾ç½®é»˜è®¤å€¼</span><br><span class="line">type Props &#x3D; &#123;</span><br><span class="line">    title?: string,</span><br><span class="line">    data?: number[]</span><br><span class="line">&#125;</span><br><span class="line">withDefaults(defineProps&lt;Props&gt;(), &#123;</span><br><span class="line">    title: &quot;å¼ ä¸‰&quot;,</span><br><span class="line">    data: () &#x3D;&gt; [1, 2, 3]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ä¸æ˜¯TS</span><br><span class="line">defineProps(&#123;</span><br><span class="line">    title:&#123;</span><br><span class="line">        default:&quot;&quot;,</span><br><span class="line">        type:string</span><br><span class="line">    &#125;,</span><br><span class="line">    data:Array</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="defineEmits"><a href="#defineEmits" class="headerlink" title="defineEmits"></a>defineEmits</h3><p>å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ å‚ é€šè¿‡defineEmitsæ´¾å‘ä¸€ä¸ªäº‹ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;menu&quot;&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;clickTap&quot;&gt;æ´¾å‘ç»™çˆ¶ç»„ä»¶&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &#39;vue&#39;</span><br><span class="line">const list &#x3D; reactive&lt;number[]&gt;([4, 5, 6])</span><br><span class="line"> </span><br><span class="line">const emit &#x3D; defineEmits([&#39;on-click&#39;])</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;å¦‚æœç”¨äº†tså¯ä»¥è¿™æ ·</span><br><span class="line">&#x2F;&#x2F; const emit &#x3D; defineEmits&lt;&#123;</span><br><span class="line">&#x2F;&#x2F;     (e: &quot;on-click&quot;, name: string): void</span><br><span class="line">&#x2F;&#x2F; &#125;&gt;()</span><br><span class="line">const clickTap &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    emit(&#39;on-click&#39;, list)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="defineExpose"><a href="#defineExpose" class="headerlink" title="defineExpose"></a>defineExpose</h3><p>å­ç»„ä»¶æš´éœ²ç»™çˆ¶ç»„ä»¶å†…éƒ¨å±æ€§   ä»çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å®ä¾‹é€šè¿‡ref </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> &lt;Menu ref&#x3D;&quot;menus&quot;&gt;&lt;&#x2F;Menu&gt;</span><br><span class="line">&#x2F;&#x2F;è¿™æ ·è·å–æ˜¯æœ‰ä»£ç æç¤ºçš„</span><br><span class="line"> const menus &#x3D; ref&lt;InstanceType&lt;typeof menus&gt;&gt;()</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰“å°menus.value å‘ç°æ²¡æœ‰ä»»ä½•å±æ€§</p>
<p>è¿™æ—¶å€™çˆ¶ç»„ä»¶æƒ³è¦è¯»åˆ°å­ç»„ä»¶çš„å±æ€§å¯ä»¥é€šè¿‡ defineExposeæš´éœ²    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const list &#x3D; reactive&lt;number[]&gt;([4, 5, 6])</span><br><span class="line"> </span><br><span class="line">defineExpose(&#123;</span><br><span class="line">    list</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="ä¾èµ–æ³¨å…¥Provide-Inject"><a href="#ä¾èµ–æ³¨å…¥Provide-Inject" class="headerlink" title="ä¾èµ–æ³¨å…¥Provide / Inject"></a>ä¾èµ–æ³¨å…¥Provide / Inject</h2><p>provide å¯ä»¥åœ¨ç¥–å…ˆç»„ä»¶ä¸­æŒ‡å®šæˆ‘ä»¬æƒ³è¦<strong>æä¾›</strong>ç»™åä»£ç»„ä»¶çš„æ•°æ®æˆ–æ–¹æ³•ï¼Œè€Œåœ¨ä»»ä½•åä»£ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨ inject æ¥æ¥æ”¶ provide <strong>æä¾›</strong>çš„æ•°æ®æˆ–æ–¹æ³•ã€‚ </p>
<p>çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;App&quot;&gt;</span><br><span class="line">        &lt;button&gt;æˆ‘æ˜¯App&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;A&gt;&lt;&#x2F;A&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import &#123; provide, ref &#125; from &#39;vue&#39;</span><br><span class="line">import A from &#39;.&#x2F;components&#x2F;A.vue&#39;</span><br><span class="line">let flag &#x3D; ref&lt;number&gt;(1)</span><br><span class="line">provide(&#39;flag&#39;, flag)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">    </span><br><span class="line">&lt;style&gt;</span><br><span class="line">.App &#123;</span><br><span class="line">    background: blue;</span><br><span class="line">    color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>å­ç»„ä»¶æ¥å—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div style&#x3D;&quot;background-color: green;&quot;&gt;</span><br><span class="line">        æˆ‘æ˜¯B</span><br><span class="line">        &lt;button @click&#x3D;&quot;change&quot;&gt;change falg&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123; flag &#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import &#123; inject, Ref, ref &#125; from &#39;vue&#39;</span><br><span class="line"> </span><br><span class="line">const flag &#x3D; inject&lt;Ref&lt;number&gt;&gt;(&#39;flag&#39;, ref(1))</span><br><span class="line"> </span><br><span class="line">const change &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    flag.value &#x3D; 2</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">    </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¼ é€’æ™®é€šçš„å€¼ æ˜¯ä¸å…·æœ‰å“åº”å¼çš„ éœ€è¦é€šè¿‡ref reactive æ·»åŠ å“åº”å¼</p>
<p>ä½¿ç”¨åœºæ™¯</p>
<p>å½“çˆ¶ç»„ä»¶æœ‰å¾ˆå¤šæ•°æ®éœ€è¦åˆ†å‘ç»™å…¶å­ä»£ç»„ä»¶çš„æ—¶å€™ï¼Œ å°±å¯ä»¥ä½¿ç”¨provideå’Œinjectã€‚</p>
<h2 id="å…„å¼Ÿç»„ä»¶ä¼ å‚å’ŒBus"><a href="#å…„å¼Ÿç»„ä»¶ä¼ å‚å’ŒBus" class="headerlink" title="å…„å¼Ÿç»„ä»¶ä¼ å‚å’ŒBus"></a>å…„å¼Ÿç»„ä»¶ä¼ å‚å’ŒBus</h2><h3 id="å€ŸåŠ©çˆ¶ç»„ä»¶ä¼ å‚"><a href="#å€ŸåŠ©çˆ¶ç»„ä»¶ä¼ å‚" class="headerlink" title="å€ŸåŠ©çˆ¶ç»„ä»¶ä¼ å‚"></a>å€ŸåŠ©çˆ¶ç»„ä»¶ä¼ å‚</h3><p>A ç»„ä»¶æ´¾å‘äº‹ä»¶é€šè¿‡App.vue æ¥å—Aç»„ä»¶æ´¾å‘çš„äº‹ä»¶ç„¶ååœ¨Props ä¼ ç»™Bç»„ä»¶ ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„</p>
<p>ç¼ºç‚¹å°±æ˜¯æ¯”è¾ƒéº»çƒ¦ ï¼Œæ— æ³•ç›´æ¥é€šä¿¡ï¼Œåªèƒ½å……å½“æ¡¥æ¢</p>
<h3 id="Event-Bus"><a href="#Event-Bus" class="headerlink" title="Event Bus"></a>Event Bus</h3><p>å¯ä»¥ä½¿ç”¨$emit ä¼ é€’ $onç›‘å¬ emitä¼ é€’è¿‡æ¥çš„äº‹ä»¶</p>
<p>ç®€æ˜“ç‰ˆ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">type BusClass&lt;T&gt; &#x3D; &#123;</span><br><span class="line">    emit: (name: T) &#x3D;&gt; void</span><br><span class="line">    on: (name: T, callback: Function) &#x3D;&gt; void</span><br><span class="line">&#125;</span><br><span class="line">type BusParams &#x3D; string | number | symbol </span><br><span class="line">type List &#x3D; &#123;</span><br><span class="line">    [key: BusParams]: Array&lt;Function&gt;</span><br><span class="line">&#125;</span><br><span class="line">class Bus&lt;T extends BusParams&gt; implements BusClass&lt;T&gt; &#123;</span><br><span class="line">    list: List</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        this.list &#x3D; &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    emit(name: T, ...args: Array&lt;any&gt;) &#123;</span><br><span class="line">        let eventName: Array&lt;Function&gt; &#x3D; this.list[name]</span><br><span class="line">        eventName.forEach(ev &#x3D;&gt; &#123;</span><br><span class="line">            ev.apply(this, args)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    on(name: T, callback: Function) &#123;</span><br><span class="line">        let fn: Array&lt;Function&gt; &#x3D; this.list[name] || [];</span><br><span class="line">        fn.push(callback)</span><br><span class="line">        this.list[name] &#x3D; fn</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">export default new Bus&lt;number&gt;()</span><br></pre></td></tr></table></figure>

<p>ç„¶åæŒ‚è½½åˆ°Vue config å…¨å±€å°±å¯ä»¥ä½¿ç”¨</p>
<h2 id="å…¨å±€ç»„ä»¶ï¼Œå±€éƒ¨ç»„ä»¶ï¼Œé€’å½’ç»„ä»¶"><a href="#å…¨å±€ç»„ä»¶ï¼Œå±€éƒ¨ç»„ä»¶ï¼Œé€’å½’ç»„ä»¶" class="headerlink" title="å…¨å±€ç»„ä»¶ï¼Œå±€éƒ¨ç»„ä»¶ï¼Œé€’å½’ç»„ä»¶"></a>å…¨å±€ç»„ä»¶ï¼Œå±€éƒ¨ç»„ä»¶ï¼Œé€’å½’ç»„ä»¶</h2><h3 id="é…ç½®å…¨å±€ç»„ä»¶"><a href="#é…ç½®å…¨å±€ç»„ä»¶" class="headerlink" title="é…ç½®å…¨å±€ç»„ä»¶"></a>é…ç½®å…¨å±€ç»„ä»¶</h3><p>åœ¨main.ts å¼•å…¥æˆ‘ä»¬çš„ç»„ä»¶è·Ÿéšåœ¨createApp(App) åé¢ åˆ‡è®°ä¸èƒ½æ”¾åˆ°mount åé¢è¿™æ˜¯ä¸€ä¸ªé“¾å¼è°ƒç”¨ç”¨</p>
<p>è°ƒç”¨ component ç¬¬ä¸€ä¸ªå‚æ•°ç»„ä»¶åç§° ç¬¬äºŒä¸ªå‚æ•°ç»„ä»¶å®ä¾‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#39;vue&#39;</span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39;</span><br><span class="line">import &#39;.&#x2F;assets&#x2F;css&#x2F;reset&#x2F;index.less&#39;</span><br><span class="line">import Card from &#39;.&#x2F;components&#x2F;Card&#x2F;index.vue&#39;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">createApp(App).component(&#39;Card&#39;,Card).mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

<p>ç›´æ¥åœ¨å…¶ä»–vueé¡µé¢ ç«‹å³ä½¿ç”¨å³å¯ æ— éœ€å¼•å…¥</p>
<h3 id="æ‰¹é‡æ³¨å†Œå…¨å±€ç»„ä»¶"><a href="#æ‰¹é‡æ³¨å†Œå…¨å±€ç»„ä»¶" class="headerlink" title="æ‰¹é‡æ³¨å†Œå…¨å±€ç»„ä»¶"></a>æ‰¹é‡æ³¨å†Œå…¨å±€ç»„ä»¶</h3><p>element ui :éå†ä¸€ä¸‹ç„¶åé€šè¿‡ app.component æ³¨å†Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import * as ElementPlusIconVue from &#39;@element-plus&#x2F;icons-vue&#39;</span><br><span class="line">const app &#x3D; created(App)</span><br><span class="line">for(const [key,component] of Object.entries(ElementPlusIconVue))&#123;</span><br><span class="line">	app.component(key,component)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®å±€éƒ¨ç»„ä»¶"><a href="#é…ç½®å±€éƒ¨ç»„ä»¶" class="headerlink" title="é…ç½®å±€éƒ¨ç»„ä»¶"></a>é…ç½®å±€éƒ¨ç»„ä»¶</h3><p>å°±æ˜¯åœ¨ä¸€ä¸ªç»„ä»¶å†…ï¼ˆAï¼‰ é€šè¿‡import å»å¼•å…¥åˆ«çš„ç»„ä»¶(B) ç§°ä¹‹ä¸ºå±€éƒ¨ç»„ä»¶</p>
<p>åº”ä¸ºBç»„ä»¶åªèƒ½åœ¨Aç»„ä»¶å†…ä½¿ç”¨ æ‰€ä»¥æ˜¯å±€éƒ¨ç»„ä»¶</p>
<p>å¦‚æœCç»„ä»¶æƒ³ç”¨Bç»„ä»¶ å°±éœ€è¦Cç»„ä»¶ä¹Ÿæ‰‹åŠ¨import å¼•å…¥ B ç»„ä»¶</p>
<h3 id="é…ç½®é€’å½’ç»„ä»¶"><a href="#é…ç½®é€’å½’ç»„ä»¶" class="headerlink" title="é…ç½®é€’å½’ç»„ä»¶"></a>é…ç½®é€’å½’ç»„ä»¶</h3><p>å­ç»„ä»¶å¢åŠ ä¸€ä¸ªç»„ä»¶åç§°(ä¸ºäº† é€’å½’ç”¨ )</p>
<p>ç»„ä»¶å®šä¹‰åç§°å‡ ç§æ–¹å¼</p>
<p>1.å†å¢åŠ ä¸€ä¸ªscript é€šè¿‡ export æ·»åŠ name</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name:&quot;TreeItem&quot;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>2.ç›´æ¥ä½¿ç”¨æ–‡ä»¶åå½“ç»„ä»¶å</p>
<p>3.ä½¿ç”¨æ’ä»¶ unplugin-vue-define-options   </p>
<p>â€‹     tsæ”¯æŒ <code>&quot;types&quot;: [&quot;unplugin-vue-define-options/macros-global&quot;]</code></p>
<h2 id="åŠ¨æ€ç»„ä»¶"><a href="#åŠ¨æ€ç»„ä»¶" class="headerlink" title="åŠ¨æ€ç»„ä»¶"></a>åŠ¨æ€ç»„ä»¶</h2><p>ä»€ä¹ˆæ˜¯åŠ¨æ€ç»„ä»¶ å°±æ˜¯ï¼šè®©å¤šä¸ªç»„ä»¶ä½¿ç”¨åŒä¸€ä¸ªæŒ‚è½½ç‚¹ï¼Œå¹¶åŠ¨æ€åˆ‡æ¢ï¼Œè¿™å°±æ˜¯åŠ¨æ€ç»„ä»¶</p>
<p>åœ¨æŒ‚è½½ç‚¹ä½¿ç”¨<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=component&spm=1001.2101.3001.7020">component</a>æ ‡ç­¾ï¼Œç„¶åä½¿ç”¨<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=v-bind&spm=1001.2101.3001.7020">v-bind</a>:is=â€ç»„ä»¶â€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  &lt;component :is&#x3D;&quot;A&quot;&gt;&lt;&#x2F;component&gt;</span><br><span class="line"></span><br><span class="line">import A from &#39;.&#x2F;A.vue&#39;</span><br><span class="line">import B from &#39;.&#x2F;B.vue&#39;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡is åˆ‡æ¢ A B ç»„ä»¶</p>
<p><strong><em>\</em>æ³¨æ„äº‹é¡¹**</strong> </p>
<p><strong><em>\</em>1.åœ¨Vue2 çš„æ—¶å€™is æ˜¯é€šè¿‡ç»„ä»¶åç§°åˆ‡æ¢çš„ åœ¨Vue3 setup æ˜¯é€šè¿‡ç»„ä»¶å®ä¾‹åˆ‡æ¢çš„**</strong></p>
<p><strong><em>\</em>2.å¦‚æœä½ æŠŠç»„ä»¶å®ä¾‹æ”¾åˆ°Reactive Vueä¼šç»™ä½ ä¸€ä¸ªè­¦å‘Šruntime-core.esm-bundler.js:38 [Vue warn]: Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with <code>markRaw</code> or using <code>shallowRef</code> instead of <code>ref</code>.<br>Component that was made reactive:**</strong> </p>
<p><strong><em>\</em>è¿™æ˜¯å› ä¸ºreactive ä¼šè¿›è¡Œproxy ä»£ç† è€Œæˆ‘ä»¬ç»„ä»¶ä»£ç†ä¹‹åæ¯«æ— ç”¨å¤„ èŠ‚çœæ€§èƒ½å¼€é”€ æ¨èæˆ‘ä»¬ä½¿ç”¨shallowRef æˆ–è€… markRaw è·³è¿‡proxy ä»£ç†**</strong></p>
<p><strong><em>\</em>ä¿®æ”¹å¦‚ä¸‹**</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const tab &#x3D; reactive&lt;Com[]&gt;([&#123;</span><br><span class="line">    name: &quot;Aç»„ä»¶&quot;,</span><br><span class="line">    comName: markRaw(A)</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    name: &quot;Bç»„ä»¶&quot;,</span><br><span class="line">    comName: markRaw(B)</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>

<h2 id="æ’æ§½slot"><a href="#æ’æ§½slot" class="headerlink" title="æ’æ§½slot"></a>æ’æ§½slot</h2><p>æ’æ§½å°±æ˜¯å­ç»„ä»¶ä¸­çš„æä¾›ç»™çˆ¶ç»„ä»¶ä½¿ç”¨çš„ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%8D%A0%E4%BD%8D%E7%AC%A6&spm=1001.2101.3001.7020">å ä½ç¬¦</a>ï¼Œç”¨<slot></slot> è¡¨ç¤ºï¼Œçˆ¶ç»„ä»¶å¯ä»¥åœ¨è¿™ä¸ªå ä½ç¬¦ä¸­å¡«å……ä»»ä½•æ¨¡æ¿ä»£ç ï¼Œå¦‚ HTMLã€ç»„ä»¶ç­‰ï¼Œå¡«å……çš„å†…å®¹ä¼šæ›¿æ¢å­ç»„ä»¶çš„<slot></slot>æ ‡ç­¾ã€‚</p>
<h3 id="åŒ¿åæ’æ§½"><a href="#åŒ¿åæ’æ§½" class="headerlink" title="åŒ¿åæ’æ§½"></a>åŒ¿åæ’æ§½</h3><p>1.åœ¨å­ç»„ä»¶æ”¾ç½®ä¸€ä¸ªæ’æ§½</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">       &lt;slot&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶ä½¿ç”¨æ’æ§½</p>
<p>åœ¨çˆ¶ç»„ä»¶ç»™è¿™ä¸ªæ’æ§½å¡«å……å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">   &lt;template v-slot&gt;</span><br><span class="line">       &lt;div&gt;2132&lt;&#x2F;div&gt;</span><br><span class="line">   &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;Dialog&gt;</span><br></pre></td></tr></table></figure>

<h3 id="å…·åæ’æ§½"><a href="#å…·åæ’æ§½" class="headerlink" title="å…·åæ’æ§½"></a><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD&spm=1001.2101.3001.7020">å…·åæ’æ§½</a></h3><p>å…·åæ’æ§½å…¶å®å°±æ˜¯ç»™æ’æ§½å–ä¸ªåå­—ã€‚ä¸€ä¸ªå­ç»„ä»¶å¯ä»¥æ”¾å¤šä¸ªæ’æ§½ï¼Œè€Œä¸”å¯ä»¥æ”¾åœ¨ä¸åŒçš„åœ°æ–¹ï¼Œè€Œçˆ¶ç»„ä»¶å¡«å……å†…å®¹æ—¶ï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªåå­—æŠŠå†…å®¹å¡«å……åˆ°å¯¹åº”æ’æ§½ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;slot name&#x3D;&quot;header&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">    &lt;slot&gt;&lt;&#x2F;slot&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;slot name&#x3D;&quot;footer&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶ä½¿ç”¨éœ€å¯¹åº”åç§°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">    &lt;template v-slot:header&gt;</span><br><span class="line">       &lt;div&gt;1&lt;&#x2F;div&gt;</span><br><span class="line">   &lt;&#x2F;template&gt;</span><br><span class="line">   &lt;template v-slot&gt;</span><br><span class="line">       &lt;div&gt;2&lt;&#x2F;div&gt;</span><br><span class="line">   &lt;&#x2F;template&gt;</span><br><span class="line">   &lt;template v-slot:footer&gt;</span><br><span class="line">       &lt;div&gt;3&lt;&#x2F;div&gt;</span><br><span class="line">   &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;Dialog&gt;</span><br></pre></td></tr></table></figure>

<p> æ’æ§½ç®€å†™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">    &lt;template #header&gt;</span><br><span class="line">       &lt;div&gt;1&lt;&#x2F;div&gt;</span><br><span class="line">   &lt;&#x2F;template&gt;</span><br><span class="line">   &lt;template #default&gt;</span><br><span class="line">       &lt;div&gt;2&lt;&#x2F;div&gt;</span><br><span class="line">   &lt;&#x2F;template&gt;</span><br><span class="line">   &lt;template #footer&gt;</span><br><span class="line">       &lt;div&gt;3&lt;&#x2F;div&gt;</span><br><span class="line">   &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;Dialog&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ä½œç”¨åŸŸæ’æ§½"><a href="#ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="ä½œç”¨åŸŸæ’æ§½"></a>ä½œç”¨åŸŸæ’æ§½</h3><p>åœ¨å­ç»„ä»¶<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A&spm=1001.2101.3001.7020">åŠ¨æ€ç»‘å®š</a>å‚æ•° æ´¾å‘ç»™çˆ¶ç»„ä»¶çš„slotå»ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;slot name&#x3D;&quot;header&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div v-for&#x3D;&quot;item in 100&quot;&gt;</span><br><span class="line">            &lt;slot :data&#x3D;&quot;item&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;slot name&#x3D;&quot;footer&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ç»“æ„æ–¹å¼å–å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> &lt;Dialog&gt;</span><br><span class="line">    &lt;template #header&gt;</span><br><span class="line">        &lt;div&gt;1&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;template&gt;</span><br><span class="line">    &lt;template #default&#x3D;&quot;&#123; data &#125;&quot;&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123; data &#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;template&gt;</span><br><span class="line">    &lt;template #footer&gt;</span><br><span class="line">        &lt;div&gt;3&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;Dialog&gt;</span><br></pre></td></tr></table></figure>

<h3 id="åŠ¨æ€æ’æ§½"><a href="#åŠ¨æ€æ’æ§½" class="headerlink" title="åŠ¨æ€æ’æ§½"></a>åŠ¨æ€æ’æ§½</h3><p>æ’æ§½å¯ä»¥æ˜¯ä¸€ä¸ªå˜é‡å</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">    &lt;template #[name]&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            23</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;Dialog&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const name &#x3D; ref(&#39;header&#39;)</span><br></pre></td></tr></table></figure>

<h3 id="ä»å­ç»„ä»¶æš´éœ²æ’æ§½"><a href="#ä»å­ç»„ä»¶æš´éœ²æ’æ§½" class="headerlink" title="ä»å­ç»„ä»¶æš´éœ²æ’æ§½"></a>ä»å­ç»„ä»¶æš´éœ²æ’æ§½</h3><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶æ—¶ï¼Œä¼šæŠŠå®ƒçš„å®ç°åŒ…è£…åœ¨æˆ‘ä»¬è‡ªå®šä¹‰ç»„ä»¶ä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•å’Œå¯æ‰©å±•çš„è§£å†³æ–¹æ¡ˆï¼Œä½†è¿™æ ·ä¸€æ¥ï¼Œç¬¬ä¸‰æ–¹ç»„ä»¶çš„æ’æ§½å°±ä¼šä¸¢å¤±ï¼Œä¸‹é¢æ–¹æ³•å¯ä»¥å°†å®ƒä»¬çš„æ’æ§½æš´éœ²åœ¨çˆ¶ç»„ä»¶ä¸­ï¼š</p>
<p><strong>WrapperComponent.vue</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;wrapper-of-third-party-component&quot;&gt;</span><br><span class="line">    &lt;ThirdPartyComponent v-bind&#x3D;&quot;$attrs&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- æš´éœ²ç¬¬ä¸‰æ–¹ç»„ä»¶çš„æ’æ§½  --&gt;</span><br><span class="line">        &lt;template v-for&#x3D;&quot;(_, name) in $slots&quot; #[name]&#x3D;&quot;slotData&quot;&gt;</span><br><span class="line">            &lt;slot :name&#x3D;&quot;name&quot; v-bind&#x3D;&quot;slotData || &#123;&#125;&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">    &lt;&#x2F;ThirdPartyComponent&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æ¯ä¸ªä½¿ç”¨<code>WrapperComponent</code>çš„ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶çš„æ’æ§½ã€‚</p>
<h2 id="å¼‚æ­¥ç»„ä»¶-amp-ä»£ç åˆ†åŒ…-amp-suspense"><a href="#å¼‚æ­¥ç»„ä»¶-amp-ä»£ç åˆ†åŒ…-amp-suspense" class="headerlink" title="å¼‚æ­¥ç»„ä»¶&amp;ä»£ç åˆ†åŒ…&amp;suspense"></a>å¼‚æ­¥ç»„ä»¶&amp;ä»£ç åˆ†åŒ…&amp;suspense</h2><h3 id="å¼‚æ­¥ç»„ä»¶"><a href="#å¼‚æ­¥ç»„ä»¶" class="headerlink" title="å¼‚æ­¥ç»„ä»¶"></a>å¼‚æ­¥ç»„ä»¶</h3><p>åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†åº”ç”¨åˆ†å‰²æˆå°ä¸€äº›çš„ä»£ç å— å¹¶ä¸”å‡å°‘ä¸»åŒ…çš„ä½“ç§¯</p>
<p>è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨å¼‚æ­¥ç»„ä»¶</p>
<p><strong>é¡¶å±‚ <code>await</code></strong></p>
<p>åœ¨setupè¯­æ³•ç³–é‡Œé¢ ä½¿ç”¨æ–¹æ³•</p>
<p><code>&lt;script setup&gt; ä¸­å¯ä»¥ä½¿ç”¨é¡¶å±‚ awaitã€‚ç»“æœä»£ç ä¼šè¢«ç¼–è¯‘æˆ async setup()</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">const post &#x3D; await fetch(&#96;&#x2F;api&#x2F;post&#x2F;1&#96;).then(r &#x3D;&gt; r.json())</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶å¼•ç”¨å­ç»„ä»¶ é€šè¿‡defineAsyncComponentåŠ è½½å¼‚æ­¥é…åˆimport å‡½æ•°æ¨¡å¼ä¾¿å¯ä»¥åˆ†åŒ…</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; reactive, ref, markRaw, toRaw, defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="javascript"><span class="keyword">const</span> Dialog = defineAsyncComponent(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../../components/Dialog/index.vue&#x27;</span>))</span></span><br><span class="line"> </span><br><span class="line"><span class="javascript"><span class="comment">//å®Œæ•´å†™æ³•</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> AsyncComp = defineAsyncComponent(&#123;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// åŠ è½½å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">  loader: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./Foo.vue&#x27;</span>),</span></span><br><span class="line"> </span><br><span class="line"><span class="javascript">  <span class="comment">// åŠ è½½å¼‚æ­¥ç»„ä»¶æ—¶ä½¿ç”¨çš„ç»„ä»¶</span></span></span><br><span class="line">  loadingComponent: LoadingComponent,</span><br><span class="line"><span class="javascript">  <span class="comment">// å±•ç¤ºåŠ è½½ç»„ä»¶å‰çš„å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤ä¸º 200ms</span></span></span><br><span class="line">  delay: 200,</span><br><span class="line"> </span><br><span class="line"><span class="javascript">  <span class="comment">// åŠ è½½å¤±è´¥åå±•ç¤ºçš„ç»„ä»¶</span></span></span><br><span class="line">  errorComponent: ErrorComponent,</span><br><span class="line"><span class="javascript">  <span class="comment">// å¦‚æœæä¾›äº†ä¸€ä¸ª timeout æ—¶é—´é™åˆ¶ï¼Œå¹¶è¶…æ—¶äº†</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// ä¹Ÿä¼šæ˜¾ç¤ºè¿™é‡Œé…ç½®çš„æŠ¥é”™ç»„ä»¶ï¼Œé»˜è®¤å€¼æ˜¯ï¼šInfinity</span></span></span><br><span class="line">  timeout: 3000</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="suspense"><a href="#suspense" class="headerlink" title="suspense"></a>suspense</h3><p><code>&lt;suspense&gt;</code> ç»„ä»¶æœ‰ä¸¤ä¸ªæ’æ§½ã€‚å®ƒä»¬éƒ½åªæ¥æ”¶ä¸€ä¸ªç›´æ¥å­èŠ‚ç‚¹ã€‚<code>default</code> æ’æ§½é‡Œçš„èŠ‚ç‚¹ä¼šå°½å¯èƒ½å±•ç¤ºå‡ºæ¥ã€‚å¦‚æœä¸èƒ½ï¼Œåˆ™å±•ç¤º <code>fallback</code> æ’æ§½é‡Œçš„èŠ‚ç‚¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;Suspense&gt;</span><br><span class="line">       &lt;template #default&gt;</span><br><span class="line">           &lt;Dialog&gt;</span><br><span class="line">               &lt;template #default&gt;</span><br><span class="line">                   &lt;div&gt;æˆ‘åœ¨å“ªå„¿&lt;&#x2F;div&gt;</span><br><span class="line">               &lt;&#x2F;template&gt;</span><br><span class="line">           &lt;&#x2F;Dialog&gt;</span><br><span class="line">       &lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">       &lt;template #fallback&gt;</span><br><span class="line">           &lt;div&gt;loading...&lt;&#x2F;div&gt;</span><br><span class="line">       &lt;&#x2F;template&gt;</span><br><span class="line">   &lt;&#x2F;Suspense&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Teleportä¼ é€ç»„ä»¶"><a href="#Teleportä¼ é€ç»„ä»¶" class="headerlink" title="Teleportä¼ é€ç»„ä»¶"></a>Teleportä¼ é€ç»„ä»¶</h2><p>Teleport æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„æ¨¡æ¿æ¸²æŸ“è‡³æŒ‡å®šDOMèŠ‚ç‚¹ï¼Œä¸å—çˆ¶çº§styleã€v-showç­‰å±æ€§å½±å“ï¼Œä½†dataã€propæ•°æ®ä¾æ—§èƒ½å¤Ÿå…±ç”¨çš„æŠ€æœ¯ï¼›</p>
<p>ä¸»è¦è§£å†³çš„é—®é¢˜ å› ä¸ºTeleportèŠ‚ç‚¹æŒ‚è½½åœ¨å…¶ä»–æŒ‡å®šçš„DOMèŠ‚ç‚¹ä¸‹ï¼Œå®Œå…¨ä¸å—çˆ¶çº§styleæ ·å¼å½±å“</p>
<p>ä½¿ç”¨æ–¹æ³•</p>
<p>é€šè¿‡to å±æ€§ æ’å…¥æŒ‡å®šå…ƒç´ ä½ç½® to=â€bodyâ€ ä¾¿å¯ä»¥å°†<code>Teleport</code> å†…å®¹ä¼ é€åˆ°æŒ‡å®šä½ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Teleport to&#x3D;&quot;body&quot;&gt;</span><br><span class="line">    &lt;Loading&gt;&lt;&#x2F;Loading&gt;</span><br><span class="line">&lt;&#x2F;Teleport&gt;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¼ é€ä½ç½® æ”¯æŒ class idç­‰ é€‰æ‹©å™¨</p>
<p>å¤šä¸ªä½¿ç”¨åœºæ™¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Teleport to&#x3D;&quot;.modal1&quot;&gt;</span><br><span class="line">     &lt;Loading&gt;&lt;&#x2F;Loading&gt;</span><br><span class="line">&lt;&#x2F;Teleport&gt;</span><br><span class="line">&lt;Teleport to&#x3D;&quot;.modal2&quot;&gt;</span><br><span class="line">     &lt;Loading&gt;&lt;&#x2F;Loading&gt;</span><br><span class="line">&lt;&#x2F;Teleport&gt;</span><br></pre></td></tr></table></figure>

<p>åŠ¨æ€æ§åˆ¶teleport</p>
<p>ä½¿ç”¨disabled è®¾ç½®ä¸º trueåˆ™ toå±æ€§ä¸ç”Ÿæ•ˆ false åˆ™ç”Ÿæ•ˆ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport :disabled&#x3D;&quot;true&quot; to&#x3D;&#39;body&#39;&gt;</span><br><span class="line">  &lt;A&gt;&lt;&#x2F;A&gt;</span><br><span class="line">&lt;&#x2F;teleport&gt;</span><br></pre></td></tr></table></figure>

<h2 id="keep-aliveç¼“å­˜ç»„ä»¶"><a href="#keep-aliveç¼“å­˜ç»„ä»¶" class="headerlink" title="keep-aliveç¼“å­˜ç»„ä»¶"></a>keep-aliveç¼“å­˜ç»„ä»¶</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸å¸Œæœ›ç»„ä»¶è¢«é‡æ–°æ¸²æŸ“å½±å“ä½¿ç”¨ä½“éªŒï¼›æˆ–è€…å¤„äºæ€§èƒ½è€ƒè™‘ï¼Œé¿å…å¤šæ¬¡é‡å¤æ¸²æŸ“é™ä½æ€§èƒ½ã€‚è€Œæ˜¯å¸Œæœ›ç»„ä»¶å¯ä»¥ç¼“å­˜ä¸‹æ¥,ç»´æŒå½“å‰çš„çŠ¶æ€ã€‚è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°<code>keep-alive</code>ç»„ä»¶ã€‚</p>
<p>å¼€å¯keep-alive ç”Ÿå‘½å‘¨æœŸçš„å˜åŒ–</p>
<p>åˆæ¬¡è¿›å…¥æ—¶ï¼š onMounted&gt; onActivated<br>é€€å‡ºåè§¦å‘ deactivated<br>å†æ¬¡è¿›å…¥ï¼š<br>åªä¼šè§¦å‘ onActivated<br>äº‹ä»¶æŒ‚è½½çš„æ–¹æ³•ç­‰ï¼Œåªæ‰§è¡Œä¸€æ¬¡çš„æ”¾åœ¨ onMountedä¸­ï¼›ç»„ä»¶æ¯æ¬¡è¿›å»æ‰§è¡Œçš„æ–¹æ³•æ”¾åœ¨ onActivatedä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- åŸºæœ¬ --&gt;</span><br><span class="line">&lt;keep-alive&gt;</span><br><span class="line">  &lt;component :is&#x3D;&quot;view&quot;&gt;&lt;&#x2F;component&gt;</span><br><span class="line">&lt;&#x2F;keep-alive&gt;</span><br><span class="line"> </span><br><span class="line">&lt;!-- å¤šä¸ªæ¡ä»¶åˆ¤æ–­çš„å­ç»„ä»¶ --&gt;</span><br><span class="line">&lt;keep-alive&gt;</span><br><span class="line">  &lt;comp-a v-if&#x3D;&quot;a &gt; 1&quot;&gt;&lt;&#x2F;comp-a&gt;</span><br><span class="line">  &lt;comp-b v-else&gt;&lt;&#x2F;comp-b&gt;</span><br><span class="line">&lt;&#x2F;keep-alive&gt;</span><br><span class="line"> </span><br><span class="line">&lt;!-- å’Œ &#96;&lt;transition&gt;&#96; ä¸€èµ·ä½¿ç”¨ --&gt;</span><br><span class="line">&lt;transition&gt;</span><br><span class="line">  &lt;keep-alive&gt;</span><br><span class="line">    &lt;component :is&#x3D;&quot;view&quot;&gt;&lt;&#x2F;component&gt;</span><br><span class="line">  &lt;&#x2F;keep-alive&gt;</span><br><span class="line">&lt;&#x2F;transition&gt;</span><br></pre></td></tr></table></figure>

<p><strong><code>include</code> å’Œ <code>exclude</code></strong></p>
<p> <code>&lt;keep-alive :include=&quot;&quot; :exclude=&quot;&quot; :max=&quot;&quot;&gt;&lt;/keep-alive&gt;</code></p>
<p>include å’Œ exclude å…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°ç¼“å­˜ã€‚äºŒè€…éƒ½å¯ä»¥ç”¨é€—å·åˆ†éš”å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼æˆ–ä¸€ä¸ªæ•°ç»„æ¥è¡¨ç¤ºï¼š</p>
<p><strong><code>max</code></strong></p>
<p><code>&lt;keep-alive :max=&quot;10&quot;&gt;   &lt;component :is=&quot;view&quot;&gt;&lt;/component&gt; &lt;/keep-alive&gt;</code></p>
<h2 id="transitionåŠ¨ç”»ç»„ä»¶"><a href="#transitionåŠ¨ç”»ç»„ä»¶" class="headerlink" title="transitionåŠ¨ç”»ç»„ä»¶"></a>transitionåŠ¨ç”»ç»„ä»¶</h2><p> Vue æä¾›äº† transition çš„å°è£…ç»„ä»¶ï¼Œåœ¨ä¸‹åˆ—æƒ…å½¢ä¸­ï¼Œå¯ä»¥ç»™ä»»ä½•å…ƒç´ å’Œç»„ä»¶æ·»åŠ è¿›å…¥/ç¦»å¼€è¿‡æ¸¡:</p>
<ul>
<li>æ¡ä»¶æ¸²æŸ“ (ä½¿ç”¨ v-if)</li>
<li>æ¡ä»¶å±•ç¤º (ä½¿ç”¨ v-show)</li>
<li>åŠ¨æ€ç»„ä»¶</li>
<li>ç»„ä»¶æ ¹èŠ‚ç‚¹</li>
</ul>
<p>è‡ªå®šä¹‰ transition è¿‡åº¦æ•ˆæœï¼Œä½ éœ€è¦å¯¹<code>transition</code>ç»„ä»¶çš„<code>name</code>å±æ€§è‡ªå®šä¹‰ã€‚å¹¶åœ¨cssä¸­å†™å…¥å¯¹åº”çš„æ ·å¼</p>
<h3 id="è¿‡æ¸¡çš„ç±»å"><a href="#è¿‡æ¸¡çš„ç±»å" class="headerlink" title="è¿‡æ¸¡çš„ç±»å"></a>è¿‡æ¸¡çš„ç±»å</h3><p>åœ¨è¿›å…¥/ç¦»å¼€çš„è¿‡æ¸¡ä¸­ï¼Œä¼šæœ‰ 6 ä¸ª class åˆ‡æ¢ã€‚</p>
<p>è¿‡æ¸¡ class   åœ¨è¿›å…¥/ç¦»å¼€çš„è¿‡æ¸¡ä¸­ï¼Œä¼šæœ‰ 6 ä¸ª class åˆ‡æ¢ã€‚</p>
<p>v-enter-fromï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åçš„ä¸‹ä¸€å¸§ç§»é™¤ã€‚</p>
<p>v-enter-activeï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªè¿›å…¥è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚</p>
<p>v-enter-toï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ v-enter-from è¢«ç§»é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚</p>
<p>v-leave-fromï¼šå®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œä¸‹ä¸€å¸§è¢«ç§»é™¤ã€‚</p>
<p>v-leave-activeï¼šå®šä¹‰ç¦»å¼€è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªç¦»å¼€è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚</p>
<p>v-leave-toï¼šç¦»å¼€è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ v-leave-from è¢«ç§»é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click&#x3D;&#39;flag &#x3D; !flag&#39;&gt;åˆ‡æ¢&lt;&#x2F;button&gt;</span><br><span class="line">&lt;transition name&#x3D;&#39;fade&#39;&gt;</span><br><span class="line">	&lt;div v-if&#x3D;&#39;flag&#39; class&#x3D;&quot;box&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;transition&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;å¼€å§‹è¿‡åº¦</span><br><span class="line">.fade-enter-from&#123;</span><br><span class="line">   background:red;</span><br><span class="line">   width:0px;</span><br><span class="line">   height:0px;</span><br><span class="line">   transform:rotate(360deg)</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;å¼€å§‹è¿‡åº¦äº†</span><br><span class="line">.fade-enter-active&#123;</span><br><span class="line">  transition: all 2.5s linear;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;è¿‡åº¦å®Œæˆ</span><br><span class="line">.fade-enter-to&#123;</span><br><span class="line">   background:yellow;</span><br><span class="line">   width:200px;</span><br><span class="line">   height:200px;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;ç¦»å¼€çš„è¿‡åº¦</span><br><span class="line">.fade-leave-from&#123;</span><br><span class="line">  width:200px;</span><br><span class="line">  height:200px;</span><br><span class="line">  transform:rotate(360deg)</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;ç¦»å¼€ä¸­è¿‡åº¦</span><br><span class="line">.fade-leave-active&#123;</span><br><span class="line">  transition: all 1s linear;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;ç¦»å¼€å®Œæˆ</span><br><span class="line">.fade-leave-to&#123;</span><br><span class="line">  width:0px;</span><br><span class="line">   height:0px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰è¿‡æ¸¡-class-ç±»å"><a href="#è‡ªå®šä¹‰è¿‡æ¸¡-class-ç±»å" class="headerlink" title="è‡ªå®šä¹‰è¿‡æ¸¡ class ç±»å"></a>è‡ªå®šä¹‰è¿‡æ¸¡ class ç±»å</h3><p>transition props</p>
<ul>
<li><code>enter-from-class</code></li>
<li><code>enter-active-class</code></li>
<li><code>enter-to-class</code></li>
<li><code>leave-from-class</code></li>
<li><code>leave-active-class</code></li>
<li><code>leave-to-class</code></li>
</ul>
<p>è‡ªå®šä¹‰è¿‡åº¦æ—¶é—´ å•ä½æ¯«ç§’</p>
<p>ä½ ä¹Ÿå¯ä»¥åˆ†åˆ«æŒ‡å®šè¿›å…¥å’Œç¦»å¼€çš„æŒç»­æ—¶é—´ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition :duration&#x3D;&quot;1000&quot;&gt;...&lt;&#x2F;transition&gt;</span><br><span class="line"> </span><br><span class="line">&lt;transition :duration&#x3D;&quot;&#123; enter: 500, leave: 800 &#125;&quot;&gt;...&lt;&#x2F;transition&gt;</span><br></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰class</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition</span><br><span class="line">    leave-active-class&#x3D;&quot;animate__animated animate__bounceInLeft&quot;</span><br><span class="line">    enter-active-class&#x3D;&quot;animate__animated animate__bounceInRight&quot;</span><br><span class="line">&gt;</span><br><span class="line">    &lt;div v-if&#x3D;&quot;flag&quot; class&#x3D;&quot;box&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;transition&gt;</span><br></pre></td></tr></table></figure>

<h3 id="transition-ç”Ÿå‘½å‘¨æœŸ8ä¸ª"><a href="#transition-ç”Ÿå‘½å‘¨æœŸ8ä¸ª" class="headerlink" title="transition ç”Ÿå‘½å‘¨æœŸ8ä¸ª"></a>transition ç”Ÿå‘½å‘¨æœŸ8ä¸ª</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@before-enter&#x3D;&quot;beforeEnter&quot; &#x2F;&#x2F;å¯¹åº”enter-from</span><br><span class="line">@enter&#x3D;&quot;enter&quot;&#x2F;&#x2F;å¯¹åº”enter-active</span><br><span class="line">@after-enter&#x3D;&quot;afterEnter&quot;&#x2F;&#x2F;å¯¹åº”enter-to</span><br><span class="line">@enter-cancelled&#x3D;&quot;enterCancelled&quot;&#x2F;&#x2F;æ˜¾ç¤ºè¿‡åº¦æ‰“æ–­</span><br><span class="line">@before-leave&#x3D;&quot;beforeLeave&quot;&#x2F;&#x2F;å¯¹åº”leave-from</span><br><span class="line">@leave&#x3D;&quot;leave&quot;&#x2F;&#x2F;å¯¹åº”enter-active</span><br><span class="line">@after-leave&#x3D;&quot;afterLeave&quot;&#x2F;&#x2F;å¯¹åº”leave-to</span><br><span class="line">@leave-cancelled&#x3D;&quot;leaveCancelled&quot;&#x2F;&#x2F;ç¦»å¼€è¿‡åº¦æ‰“æ–­</span><br></pre></td></tr></table></figure>

<p>å½“åªç”¨ JavaScript è¿‡æ¸¡çš„æ—¶å€™ï¼Œåœ¨ <strong><code>enter</code> å’Œ <code>leave</code> é’©å­ä¸­å¿…é¡»ä½¿ç”¨ <code>done</code> è¿›è¡Œå›è°ƒ</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const beforeEnter &#x3D; (el: Element) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&#39;è¿›å…¥ä¹‹å‰from&#39;, el);</span><br><span class="line">&#125;</span><br><span class="line">const Enter &#x3D; (el: Element,done:Function) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&#39;è¿‡åº¦æ›²çº¿&#39;);</span><br><span class="line">    setTimeout(()&#x3D;&gt;&#123;</span><br><span class="line">       done()</span><br><span class="line">    &#125;,3000)</span><br><span class="line">&#125;</span><br><span class="line">const AfterEnter &#x3D; (el: Element) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&#39;to&#39;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="appear"><a href="#appear" class="headerlink" title="appear"></a>appear</h3><p>é€šè¿‡è¿™ä¸ªå±æ€§å¯ä»¥è®¾ç½®åˆå§‹èŠ‚ç‚¹è¿‡åº¦ å°±æ˜¯é¡µé¢åŠ è½½å®Œæˆå°±å¼€å§‹åŠ¨ç”» å¯¹åº”ä¸‰ä¸ªçŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">appear-active-class&#x3D;&quot;&quot;</span><br><span class="line">appear-from-class&#x3D;&quot;&quot;</span><br><span class="line">appear-to-class&#x3D;&quot;&quot;</span><br><span class="line">appear</span><br></pre></td></tr></table></figure>

<h2 id="transition-groupè¿‡åº¦åˆ—è¡¨"><a href="#transition-groupè¿‡åº¦åˆ—è¡¨" class="headerlink" title="transition-groupè¿‡åº¦åˆ—è¡¨"></a>transition-groupè¿‡åº¦åˆ—è¡¨</h2><p>æ€ä¹ˆåŒæ—¶æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ï¼Œæ¯”å¦‚ä½¿ç”¨ <code>v-for</code>ï¼Ÿåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ <code>&lt;transition-group&gt;</code> ç»„ä»¶ã€‚</p>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¸ä¼šæ¸²æŸ“ä¸€ä¸ªåŒ…è£¹å…ƒç´ ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡ <code>tag</code> attribute æŒ‡å®šæ¸²æŸ“ä¸€ä¸ªå…ƒç´ ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/transitions-enterleave.html#%E8%BF%87%E6%B8%A1%E6%A8%A1%E5%BC%8F">è¿‡æ¸¡æ¨¡å¼</a>ä¸å¯ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å†ç›¸äº’åˆ‡æ¢ç‰¹æœ‰çš„å…ƒç´ ã€‚</li>
<li>å†…éƒ¨å…ƒç´ <strong>æ€»æ˜¯éœ€è¦</strong>æä¾›å”¯ä¸€çš„ <code>key</code> attribute å€¼ã€‚</li>
<li>CSS è¿‡æ¸¡çš„ç±»å°†ä¼šåº”ç”¨åœ¨å†…éƒ¨çš„å…ƒç´ ä¸­ï¼Œè€Œä¸æ˜¯è¿™ä¸ªç»„/å®¹å™¨æœ¬èº«ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition-group&gt;</span><br><span class="line">     &lt;div style&#x3D;&quot;margin: 10px;&quot; :key&#x3D;&quot;item&quot; v-for&#x3D;&quot;item in list&quot;&gt;&#123;&#123; item &#125;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;transition-group&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const list &#x3D; reactive&lt;number[]&gt;([1, 2, 4, 5, 6, 7, 8, 9])</span><br><span class="line">const Push &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    list.push(123)</span><br><span class="line">&#125;</span><br><span class="line">const Pop &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    list.pop()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ—è¡¨çš„ç§»åŠ¨è¿‡æ¸¡"><a href="#åˆ—è¡¨çš„ç§»åŠ¨è¿‡æ¸¡" class="headerlink" title="åˆ—è¡¨çš„ç§»åŠ¨è¿‡æ¸¡"></a>åˆ—è¡¨çš„ç§»åŠ¨è¿‡æ¸¡</h3><p><code>&lt;transition-group&gt;</code> ç»„ä»¶è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šä¹‹å¤„ã€‚é™¤äº†è¿›å…¥å’Œç¦»å¼€ï¼Œå®ƒè¿˜å¯ä»¥ä¸ºå®šä½çš„æ”¹å˜æ·»åŠ åŠ¨ç”»ã€‚åªéœ€äº†è§£æ–°å¢çš„ v-move ç±»å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–°åŠŸèƒ½ï¼Œå®ƒä¼šåº”ç”¨åœ¨å…ƒç´ æ”¹å˜å®šä½çš„è¿‡ç¨‹ä¸­ã€‚åƒä¹‹å‰çš„ç±»åä¸€æ ·ï¼Œå®ƒçš„å‰ç¼€å¯ä»¥é€šè¿‡ name attribute æ¥è‡ªå®šä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ move-class attribute æ‰‹åŠ¨è®¾ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;shuffle&quot;&gt;Shuffle&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;transition-group class&#x3D;&quot;wraps&quot; name&#x3D;&quot;mmm&quot; tag&#x3D;&quot;ul&quot;&gt;</span><br><span class="line">            &lt;li class&#x3D;&quot;cell&quot; v-for&#x3D;&quot;item in items&quot; :key&#x3D;&quot;item.id&quot;&gt;&#123;&#123; item.number &#125;&#125;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;transition-group&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">  </span><br><span class="line">&lt;script setup  lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import _ from &#39;lodash&#39;</span><br><span class="line">import &#123; ref &#125; from &#39;vue&#39;</span><br><span class="line">let items &#x3D; ref(Array.apply(null, &#123; length: 81 &#125; as number[]).map((_, index) &#x3D;&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        id: index,</span><br><span class="line">        number: (index % 9) + 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;))</span><br><span class="line">const shuffle &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    items.value &#x3D; _.shuffle(items.value)</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">  </span><br><span class="line">&lt;style scoped lang&#x3D;&quot;less&quot;&gt;</span><br><span class="line">.wraps &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-wrap: wrap;</span><br><span class="line">    width: calc(25px * 10 + 9px);</span><br><span class="line">    .cell &#123;</span><br><span class="line">        width: 25px;</span><br><span class="line">        height: 25px;</span><br><span class="line">        border: 1px solid #ccc;</span><br><span class="line">        list-style-type: none;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: center;</span><br><span class="line">        align-items: center;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">.mmm-move &#123;</span><br><span class="line">    transition: transform 0.8s ease;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="çŠ¶æ€è¿‡æ¸¡"><a href="#çŠ¶æ€è¿‡æ¸¡" class="headerlink" title="çŠ¶æ€è¿‡æ¸¡"></a>çŠ¶æ€è¿‡æ¸¡</h3><p>Vue ä¹ŸåŒæ ·å¯ä»¥ç»™å­—ä½“ èƒŒæ™¯é¢œè‰²ç­‰æ·»åŠ è¿‡æ¸¡åŠ¨ç”»</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input step&#x3D;&quot;20&quot; v-model&#x3D;&quot;num.current&quot; type&#x3D;&quot;number&quot; &#x2F;&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123; num.tweenedNumber.toFixed(0) &#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import &#123; reactive, watch &#125; from &#39;vue&#39;</span><br><span class="line">import gsap from &#39;gsap&#39;</span><br><span class="line">const num &#x3D; reactive(&#123;</span><br><span class="line">    tweenedNumber: 0,</span><br><span class="line">    current:0</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">watch(()&#x3D;&gt;num.current, (newVal) &#x3D;&gt; &#123;</span><br><span class="line">    gsap.to(num, &#123;</span><br><span class="line">        duration: 1,</span><br><span class="line">        tweenedNumber: newVal</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">    </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="æ·±å…¥v-model"><a href="#æ·±å…¥v-model" class="headerlink" title="æ·±å…¥v-model"></a>æ·±å…¥v-model</h2><p>v-model å…¶å®æ˜¯ä¸€ä¸ªè¯­æ³•ç³– é€šè¿‡props å’Œ emitç»„åˆè€Œæˆçš„</p>
<p>1.é»˜è®¤å€¼çš„æ”¹å˜</p>
<ul>
<li>propï¼š<code>value</code> -&gt; <code>modelValue</code>ï¼›</li>
<li>äº‹ä»¶ï¼š<code>input</code> -&gt; <code>update:modelValue</code>ï¼›</li>
<li><code>v-bind</code> çš„ <code>.sync</code> ä¿®é¥°ç¬¦å’Œç»„ä»¶çš„ <code>model</code> é€‰é¡¹å·²ç§»é™¤</li>
<li>æ–°å¢ æ”¯æŒå¤šä¸ªv-model</li>
<li>æ–°å¢ æ”¯æŒè‡ªå®šä¹‰ ä¿®é¥°ç¬¦ Modifiers</li>
</ul>
<p>çˆ¶ç»„ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click&#x3D;&quot;show &#x3D; !show&quot;&gt;å¼€å…³&#123;&#123;show&#125;&#125;&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;Dialog v-model&#x3D;&quot;show&quot;&gt;&lt;&#x2F;Dialog&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import Dialog from &quot;.&#x2F;components&#x2F;Dialog&#x2F;index.vue&quot;;</span><br><span class="line">import &#123;ref&#125; from &#39;vue&#39;</span><br><span class="line">const show &#x3D; ref(false)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>å­ç»„ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">     &lt;div v-if&#x3D;&#39;propData.modelValue&#39; class&#x3D;&quot;dialog&quot;&gt;</span><br><span class="line">         &lt;div class&#x3D;&quot;dialog-header&quot;&gt;</span><br><span class="line">             &lt;div&gt;æ ‡é¢˜&lt;&#x2F;div&gt;&lt;div @click&#x3D;&quot;close&quot;&gt;x&lt;&#x2F;div&gt;</span><br><span class="line">         &lt;&#x2F;div&gt;</span><br><span class="line">         &lt;div class&#x3D;&quot;dialog-content&quot;&gt;</span><br><span class="line">            å†…å®¹</span><br><span class="line">         &lt;&#x2F;div&gt;</span><br><span class="line">     &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line"> </span><br><span class="line">type Props &#x3D; &#123;</span><br><span class="line">   modelValue:boolean</span><br><span class="line">&#125;</span><br><span class="line">const propData &#x3D; defineProps&lt;Props&gt;()</span><br><span class="line">const emit &#x3D; defineEmits([&#39;update:modelValue&#39;])</span><br><span class="line">const close &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">     emit(&#39;update:modelValue&#39;,false)</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&#39;less&#39;&gt;</span><br><span class="line">.dialog&#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    height: 300px;</span><br><span class="line">    border: 1px solid #ccc;</span><br><span class="line">    position: fixed;</span><br><span class="line">    left:50%;</span><br><span class="line">    top:50%;</span><br><span class="line">    transform: translate(-50%,-50%);</span><br><span class="line">    &amp;-header&#123;</span><br><span class="line">        border-bottom: 1px solid #ccc;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: space-between;</span><br><span class="line">        padding: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;-content&#123;</span><br><span class="line">        padding: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ç»‘å®šå¤šä¸ªæ¡ˆä¾‹"><a href="#ç»‘å®šå¤šä¸ªæ¡ˆä¾‹" class="headerlink" title="ç»‘å®šå¤šä¸ªæ¡ˆä¾‹"></a>ç»‘å®šå¤šä¸ªæ¡ˆä¾‹</h3><p>çˆ¶ç»„ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click&#x3D;&quot;show &#x3D; !show&quot;&gt;å¼€å…³&#123;&#123;show&#125;&#125; ----- &#123;&#123;title&#125;&#125;&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;Dialog v-model:title&#x3D;&#39;title&#39; v-model&#x3D;&quot;show&quot;&gt;&lt;&#x2F;Dialog&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import Dialog from &quot;.&#x2F;components&#x2F;Dialog&#x2F;index.vue&quot;;</span><br><span class="line">import &#123;ref&#125; from &#39;vue&#39;</span><br><span class="line">const show &#x3D; ref(false)</span><br><span class="line">const title &#x3D; ref(&#39;æˆ‘æ˜¯æ ‡é¢˜&#39;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>å­ç»„ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">     &lt;div v-if&#x3D;&#39;modelValue &#39; class&#x3D;&quot;dialog&quot;&gt;</span><br><span class="line">         &lt;div class&#x3D;&quot;dialog-header&quot;&gt;</span><br><span class="line">             &lt;div&gt;æ ‡é¢˜---&#123;&#123;title&#125;&#125;&lt;&#x2F;div&gt;&lt;div @click&#x3D;&quot;close&quot;&gt;x&lt;&#x2F;div&gt;</span><br><span class="line">         &lt;&#x2F;div&gt;</span><br><span class="line">         &lt;div class&#x3D;&quot;dialog-content&quot;&gt;</span><br><span class="line">            å†…å®¹</span><br><span class="line">         &lt;&#x2F;div&gt;</span><br><span class="line">         </span><br><span class="line">     &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line"> </span><br><span class="line">type Props &#x3D; &#123;</span><br><span class="line">   modelValue:boolean,</span><br><span class="line">   title:string</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">const propData &#x3D; defineProps&lt;Props&gt;()</span><br><span class="line"> </span><br><span class="line">const emit &#x3D; defineEmits([&#39;update:modelValue&#39;,&#39;update:title&#39;])</span><br><span class="line"> </span><br><span class="line">const close &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">     emit(&#39;update:modelValue&#39;,false)</span><br><span class="line">     emit(&#39;update:title&#39;,&#39;æˆ‘è¦æ”¹å˜&#39;)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style lang&#x3D;&#39;less&#39;&gt;</span><br><span class="line">.dialog&#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    height: 300px;</span><br><span class="line">    border: 1px solid #ccc;</span><br><span class="line">    position: fixed;</span><br><span class="line">    left:50%;</span><br><span class="line">    top:50%;</span><br><span class="line">    transform: translate(-50%,-50%);</span><br><span class="line">    &amp;-header&#123;</span><br><span class="line">        border-bottom: 1px solid #ccc;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: space-between;</span><br><span class="line">        padding: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;-content&#123;</span><br><span class="line">        padding: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰ä¿®é¥°ç¬¦"><a href="#è‡ªå®šä¹‰ä¿®é¥°ç¬¦" class="headerlink" title="è‡ªå®šä¹‰ä¿®é¥°ç¬¦"></a>è‡ªå®šä¹‰ä¿®é¥°ç¬¦</h3><p>æ·»åŠ åˆ°ç»„ä»¶ <code>v-model</code> çš„ä¿®é¥°ç¬¦å°†é€šè¿‡ <code>modelModifiers</code> prop æä¾›ç»™ç»„ä»¶ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç»„ä»¶ï¼Œå…¶ä¸­åŒ…å«é»˜è®¤ä¸ºç©ºå¯¹è±¡çš„ <code>modelModifiers</code> prop</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line"> </span><br><span class="line">type Props &#x3D; &#123;</span><br><span class="line">    modelValue: boolean,</span><br><span class="line">    title?: string,</span><br><span class="line">    modelModifiers?: &#123;</span><br><span class="line">        default: () &#x3D;&gt; &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    titleModifiers?: &#123;</span><br><span class="line">        default: () &#x3D;&gt; &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">const propData &#x3D; defineProps&lt;Props&gt;()</span><br><span class="line"> </span><br><span class="line">const emit &#x3D; defineEmits([&#39;update:modelValue&#39;, &#39;update:title&#39;])</span><br><span class="line"> </span><br><span class="line">const close &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    console.log(propData.modelModifiers);</span><br><span class="line"> </span><br><span class="line">    emit(&#39;update:modelValue&#39;, false)</span><br><span class="line">    emit(&#39;update:title&#39;, &#39;æˆ‘è¦æ”¹å˜&#39;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå®šä¹‰æŒ‡ä»¤directive-å±äºç ´åæ€§æ›´æ–°"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤directive-å±äºç ´åæ€§æ›´æ–°" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤directive(å±äºç ´åæ€§æ›´æ–°)"></a>è‡ªå®šä¹‰æŒ‡ä»¤directive(å±äºç ´åæ€§æ›´æ–°)</h2><p>directive-<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4&spm=1001.2101.3001.7020">è‡ªå®šä¹‰æŒ‡ä»¤</a>ï¼ˆå±äºç ´åæ€§æ›´æ–°ï¼‰</p>
<h3 id="vue3æŒ‡ä»¤çš„é’©å­å‡½æ•°"><a href="#vue3æŒ‡ä»¤çš„é’©å­å‡½æ•°" class="headerlink" title="vue3æŒ‡ä»¤çš„é’©å­å‡½æ•°"></a>vue3æŒ‡ä»¤çš„é’©å­å‡½æ•°</h3><p>created å…ƒç´ åˆå§‹åŒ–çš„æ—¶å€™<br>beforeMount æŒ‡ä»¤ç»‘å®šåˆ°å…ƒç´ åè°ƒç”¨ åªè°ƒç”¨ä¸€æ¬¡<br>mounted å…ƒç´ æ’å…¥çˆ¶çº§domè°ƒç”¨<br>beforeUpdate å…ƒç´ è¢«æ›´æ–°ä¹‹å‰è°ƒç”¨<br>update è¿™ä¸ªå‘¨æœŸæ–¹æ³•è¢«ç§»é™¤ æ”¹ç”¨updated<br>beforeUnmount åœ¨å…ƒç´ è¢«ç§»é™¤å‰è°ƒç”¨<br>unmounted æŒ‡ä»¤è¢«ç§»é™¤åè°ƒç”¨ åªè°ƒç”¨ä¸€æ¬¡</p>
<p>Vue2 æŒ‡ä»¤ bind inserted update componentUpdated unbind</p>
<h3 id="åœ¨setupå†…å®šä¹‰å±€éƒ¨æŒ‡ä»¤"><a href="#åœ¨setupå†…å®šä¹‰å±€éƒ¨æŒ‡ä»¤" class="headerlink" title="åœ¨setupå†…å®šä¹‰å±€éƒ¨æŒ‡ä»¤"></a>åœ¨setupå†…å®šä¹‰å±€éƒ¨æŒ‡ä»¤</h3><p>è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é™åˆ¶ï¼šå¿…é¡»ä»¥ <code>vNameOfDirective</code> çš„å½¢å¼æ¥å‘½åæœ¬åœ°è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œä»¥ä½¿å¾—å®ƒä»¬å¯ä»¥ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click&#x3D;&quot;show &#x3D; !show&quot;&gt;å¼€å…³&#123;&#123;show&#125;&#125; ----- &#123;&#123;title&#125;&#125;&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;Dialog  v-move-directive&#x3D;&quot;&#123;background:&#39;green&#39;,flag:show&#125;&quot;&gt;&lt;&#x2F;Dialog&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">const</span> vMoveDirective: Directive = &#123;</span><br><span class="line">  created: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;åˆå§‹åŒ–====&gt;&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">beforeMount</span>(<span class="params">...args: <span class="built_in">Array</span>&lt;any&gt;</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// åœ¨å…ƒç´ ä¸Šåšäº›æ“ä½œ</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;åˆå§‹åŒ–ä¸€æ¬¡=======&gt;&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params">el: any, dir: DirectiveBinding&lt;Value&gt;</span>)</span> &#123;</span><br><span class="line">    el.style.background = dir.value.background;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;åˆå§‹åŒ–========&gt;&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">beforeUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æ›´æ–°ä¹‹å‰&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">updated</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æ›´æ–°ç»“æŸ&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">beforeUnmount</span>(<span class="params">...args: <span class="built_in">Array</span>&lt;any&gt;</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(args);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;======&gt;å¸è½½ä¹‹å‰&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">unmounted</span>(<span class="params">...args: <span class="built_in">Array</span>&lt;any&gt;</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(args);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;======&gt;å¸è½½å®Œæˆ&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="ç”Ÿå‘½å‘¨æœŸé’©å­å‚æ•°è¯¦è§£"><a href="#ç”Ÿå‘½å‘¨æœŸé’©å­å‚æ•°è¯¦è§£" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸé’©å­å‚æ•°è¯¦è§£"></a>ç”Ÿå‘½å‘¨æœŸé’©å­å‚æ•°è¯¦è§£</h3><p>ç¬¬ä¸€ä¸ª el å½“å‰ç»‘å®šçš„DOM å…ƒç´ </p>
<p>ç¬¬äºŒä¸ª binding</p>
<p>instanceï¼šä½¿ç”¨æŒ‡ä»¤çš„ç»„ä»¶å®ä¾‹ã€‚<br>valueï¼šä¼ é€’ç»™æŒ‡ä»¤çš„å€¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ v-my-directive=â€1 + 1â€ ä¸­ï¼Œè¯¥å€¼ä¸º 2ã€‚<br>oldValueï¼šå…ˆå‰çš„å€¼ï¼Œä»…åœ¨ beforeUpdate å’Œ updated ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æœ‰æ›´æ”¹éƒ½å¯ç”¨ã€‚<br>argï¼šä¼ é€’ç»™æŒ‡ä»¤çš„å‚æ•°(å¦‚æœæœ‰çš„è¯)ã€‚ä¾‹å¦‚åœ¨ v-my-directive:foo ä¸­ï¼Œarg ä¸º â€œfooâ€ã€‚<br>modifiersï¼šåŒ…å«ä¿®é¥°ç¬¦(å¦‚æœæœ‰çš„è¯) çš„å¯¹è±¡ã€‚ä¾‹å¦‚åœ¨ v-my-directive.foo.bar ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º {foo: trueï¼Œbar: true}ã€‚<br>dirï¼šä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨æ³¨å†ŒæŒ‡ä»¤æ—¶ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p>
<p>ç¬¬ä¸‰ä¸ª å½“å‰å…ƒç´ çš„è™šæ‹ŸDOM ä¹Ÿå°±æ˜¯Vnode</p>
<p>ç¬¬å››ä¸ª prevNode ä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ <code>beforeUpdate</code> å’Œ <code>updated</code> é’©å­ä¸­å¯ç”¨ </p>
<h3 id="å‡½æ•°ç®€å†™"><a href="#å‡½æ•°ç®€å†™" class="headerlink" title="å‡½æ•°ç®€å†™"></a>å‡½æ•°ç®€å†™</h3><p>ä½ å¯èƒ½æƒ³åœ¨ <code>mounted</code> å’Œ <code>updated</code> æ—¶è§¦å‘ç›¸åŒè¡Œä¸ºï¼Œè€Œä¸å…³å¿ƒå…¶ä»–çš„é’©å­å‡½æ•°ã€‚é‚£ä¹ˆä½ å¯ä»¥é€šè¿‡å°†è¿™ä¸ªå‡½æ•°æ¨¡å¼å®ç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div&gt;</span><br><span class="line">      &lt;input v-model&#x3D;&quot;value&quot; type&#x3D;&quot;text&quot; &#x2F;&gt;</span><br><span class="line">      &lt;A v-move&#x3D;&quot;&#123; background: value &#125;&quot;&gt;&lt;&#x2F;A&gt;</span><br><span class="line">   &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">   </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import A from &#39;.&#x2F;components&#x2F;A.vue&#39;</span><br><span class="line">import &#123; ref, Directive, DirectiveBinding &#125; from &#39;vue&#39;</span><br><span class="line">let value &#x3D; ref&lt;string&gt;(&#39;&#39;)</span><br><span class="line">type Dir &#x3D; &#123;</span><br><span class="line">   background: string</span><br><span class="line">&#125;</span><br><span class="line">const vMove: Directive &#x3D; (el, binding: DirectiveBinding&lt;Dir&gt;) &#x3D;&gt; &#123;</span><br><span class="line">   el.style.background &#x3D; binding.value.background</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰æ‹–æ‹½æŒ‡ä»¤ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-move class&#x3D;&quot;box&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;header&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      å†…å®¹</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import &#123; Directive &#125; from &quot;vue&quot;;</span><br><span class="line">const vMove: Directive &#x3D; &#123;</span><br><span class="line">  mounted(el: HTMLElement) &#123;</span><br><span class="line">    let moveEl &#x3D; el.firstElementChild as HTMLElement;</span><br><span class="line">    const mouseDown &#x3D; (e: MouseEvent) &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F;é¼ æ ‡ç‚¹å‡»ç‰©ä½“é‚£ä¸€åˆ»ç›¸å¯¹äºç‰©ä½“å·¦ä¾§è¾¹æ¡†çš„è·ç¦»&#x3D;ç‚¹å‡»æ—¶çš„ä½ç½®ç›¸å¯¹äºæµè§ˆå™¨æœ€å·¦è¾¹çš„è·ç¦»-ç‰©ä½“å·¦è¾¹æ¡†ç›¸å¯¹äºæµè§ˆå™¨æœ€å·¦è¾¹çš„è·ç¦»</span><br><span class="line">      console.log(e.clientX, e.clientY, &quot;-----èµ·å§‹&quot;, el.offsetLeft);</span><br><span class="line">      let X &#x3D; e.clientX - el.offsetLeft;</span><br><span class="line">      let Y &#x3D; e.clientY - el.offsetTop;</span><br><span class="line">      const move &#x3D; (e: MouseEvent) &#x3D;&gt; &#123;</span><br><span class="line">        el.style.left &#x3D; e.clientX - X + &quot;px&quot;;</span><br><span class="line">        el.style.top &#x3D; e.clientY - Y + &quot;px&quot;;</span><br><span class="line">        console.log(e.clientX, e.clientY, &quot;---æ”¹å˜&quot;);</span><br><span class="line">      &#125;;</span><br><span class="line">      document.addEventListener(&quot;mousemove&quot;, move);</span><br><span class="line">      document.addEventListener(&quot;mouseup&quot;, () &#x3D;&gt; &#123;</span><br><span class="line">        document.removeEventListener(&quot;mousemove&quot;, move);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    moveEl.addEventListener(&quot;mousedown&quot;, mouseDown);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style lang&#x3D;&#39;less&#39;&gt;</span><br><span class="line">.box &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  left: 50%;</span><br><span class="line">  top: 50%;</span><br><span class="line">  transform: translate(-50%, -50%);</span><br><span class="line">  width: 200px;</span><br><span class="line">  height: 200px;</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  .header &#123;</span><br><span class="line">    height: 20px;</span><br><span class="line">    background: black;</span><br><span class="line">    cursor: move;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå®šä¹‰Hooks"><a href="#è‡ªå®šä¹‰Hooks" class="headerlink" title="è‡ªå®šä¹‰Hooks"></a>è‡ªå®šä¹‰Hooks</h2><p>Vue3 è‡ªå®šä¹‰Hook</p>
<p>ä¸»è¦ç”¨æ¥å¤„ç†å¤ç”¨ä»£ç é€»è¾‘çš„ä¸€äº›å°è£…</p>
<p>è¿™ä¸ªåœ¨vue2 å°±å·²ç»æœ‰ä¸€ä¸ªä¸œè¥¿æ˜¯Mixins</p>
<p>mixinså°±æ˜¯å°†è¿™äº›å¤šä¸ªç›¸åŒçš„é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œå„ä¸ªç»„ä»¶åªéœ€è¦å¼•å…¥mixinsï¼Œå°±èƒ½å®ç°ä¸€æ¬¡å†™ä»£ç ï¼Œå¤šç»„ä»¶å—ç›Šçš„æ•ˆæœã€‚</p>
<p>å¼Šç«¯å°±æ˜¯ ä¼šæ¶‰åŠåˆ°è¦†ç›–çš„é—®é¢˜</p>
<p>ç»„ä»¶çš„dataã€methodsã€filtersä¼šè¦†ç›–mixinsé‡Œçš„åŒådataã€methodsã€filtersã€‚</p>
<p>ç¬¬äºŒç‚¹å°±æ˜¯ å˜é‡æ¥æºä¸æ˜ç¡®ï¼ˆéšå¼ä¼ å…¥ï¼‰ï¼Œä¸åˆ©äºé˜…è¯»ï¼Œä½¿ä»£ç å˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚</p>
<p>Vue3 çš„è‡ªå®šä¹‰çš„hook</p>
<p>Vue3 çš„ hookå‡½æ•° ç›¸å½“äº vue2 çš„ mixin, ä¸åŒåœ¨ä¸ hooks æ˜¯å‡½æ•°<br>Vue3 çš„ hookå‡½æ•° å¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜ä»£ç çš„å¤ç”¨æ€§, è®©æˆ‘ä»¬èƒ½åœ¨ä¸åŒçš„ç»„ä»¶ä¸­éƒ½åˆ©ç”¨ hooks å‡½æ•°</p>
<p>Vue3 hook åº“<a target="_blank" rel="noopener" href="https://vueuse.org/guide/">Get Started | VueUse</a></p>
<h2 id="Vue3å®šä¹‰å…¨å±€å‡½æ•°å’Œå˜é‡"><a href="#Vue3å®šä¹‰å…¨å±€å‡½æ•°å’Œå˜é‡" class="headerlink" title="Vue3å®šä¹‰å…¨å±€å‡½æ•°å’Œå˜é‡"></a>Vue3å®šä¹‰å…¨å±€å‡½æ•°å’Œå˜é‡</h2><h3 id="globalProperties"><a href="#globalProperties" class="headerlink" title="globalProperties"></a>globalProperties</h3><p>ç”±äº<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Vue3&spm=1001.2101.3001.7020">Vue3</a> æ²¡æœ‰Prototype å±æ€§ ä½¿ç”¨ app.config.globalProperties ä»£æ›¿ ç„¶åå»å®šä¹‰å˜é‡å’Œå‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¹‹å‰ (Vue 2.x)</span></span><br><span class="line">Vue.prototype.$http = <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹‹å (Vue 3.x)</span></span><br><span class="line"><span class="keyword">const</span> app = createApp(&#123;&#125;)</span><br><span class="line">app.config.globalProperties.$http = <span class="function">() =&gt;</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h3><p>åœ¨Vue3 ç§»é™¤äº†</p>
<p>å¯ä»¥ä½¿ç”¨å…¨å±€å‡½æ•°ä»£æ›¿Filters</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.config.globalProperties.$filters = &#123;</span><br><span class="line">  format&lt;T <span class="keyword">extends</span> any&gt;(str: T): string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`$<span class="subst">$&#123;str&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å£°æ˜æ–‡ä»¶ ä¸ç„¶TSæ— æ³•æ­£ç¡®ç±»å‹ æ¨å¯¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">type Filter = &#123;</span><br><span class="line">    format&lt;T&gt;(str: T): string</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// å£°æ˜è¦æ‰©å……@vue/runtime-coreåŒ…çš„å£°æ˜.</span></span><br><span class="line"><span class="comment">// è¿™é‡Œæ‰©å……&quot;ComponentCustomProperties&quot;æ¥å£, å› ä¸ºä»–æ˜¯vue3ä¸­å®ä¾‹çš„å±æ€§çš„ç±»å‹.</span></span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;vue&#x27;</span> &#123;</span><br><span class="line">    <span class="keyword">export</span> interface ComponentCustomProperties &#123;</span><br><span class="line">        $filters: Filter</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>setup è¯»å–å€¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getCurrentInstance, ComponentInternalInstance &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> &#123; appContext &#125; = &lt;ComponentInternalInstance&gt;getCurrentInstance()</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(appContext.config.globalProperties.$env);</span><br><span class="line"> </span><br><span class="line">æ¨èç¬¬äºŒç§æ–¹å¼</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> &#123;ref,reactive,getCurrentInstance&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = getCurrentInstance()</span><br><span class="line"><span class="built_in">console</span>.log(app?.proxy?.$filters.format(<span class="string">&#x27;js&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="ç¼–å†™Vue3æ’ä»¶"><a href="#ç¼–å†™Vue3æ’ä»¶" class="headerlink" title="ç¼–å†™Vue3æ’ä»¶"></a>ç¼–å†™Vue3æ’ä»¶</h2><p>æ’ä»¶æ˜¯è‡ªåŒ…å«çš„ä»£ç ï¼Œé€šå¸¸å‘ Vue æ·»åŠ å…¨å±€çº§åŠŸèƒ½ã€‚ä½ å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡éœ€è¦æœ‰installæ–¹æ³•Vueä¼šå¸®ä½ è‡ªåŠ¨æ³¨å…¥åˆ°install æ–¹æ³• ä½ å¦‚æœæ˜¯function å°±ç›´æ¥å½“install æ–¹æ³•å»ä½¿ç”¨</p>
<p>åœ¨ä½¿ç”¨ <code>createApp()</code> åˆå§‹åŒ– Vue åº”ç”¨ç¨‹åºåï¼Œä½ å¯ä»¥é€šè¿‡è°ƒç”¨ <code>use()</code> æ–¹æ³•å°†æ’ä»¶æ·»åŠ åˆ°ä½ çš„åº”ç”¨ç¨‹åºä¸­ã€‚</p>
<p>å®ç°ä¸€ä¸ªLoading</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Loading.Vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-if&#x3D;&quot;isShow&quot; class&#x3D;&quot;loading&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;loading-content&quot;&gt;Loading...&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import &#123; ref &#125; from &#39;vue&#39;;</span><br><span class="line">const isShow &#x3D; ref(false)&#x2F;&#x2F;å®šä½loading çš„å¼€å…³</span><br><span class="line"> </span><br><span class="line">const show &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    isShow.value &#x3D; true</span><br><span class="line">&#125;</span><br><span class="line">const hide &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    isShow.value &#x3D; false</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;å¯¹å¤–æš´éœ² å½“å‰ç»„ä»¶çš„å±æ€§å’Œæ–¹æ³•</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">    isShow,</span><br><span class="line">    show,</span><br><span class="line">    hide</span><br><span class="line">&#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style scoped lang&#x3D;&quot;less&quot;&gt;</span><br><span class="line">.loading &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    inset: 0;</span><br><span class="line">    background: rgba(0, 0, 0, 0.8);</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">    &amp;-content &#123;</span><br><span class="line">        font-size: 30px;</span><br><span class="line">        color: #fff;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Loading.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123;  createVNode, render, VNode, App &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">&#x27;./index.vue&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">install</span>(<span class="params">app: App</span>)</span> &#123;</span><br><span class="line">        <span class="comment">//createVNode vueæä¾›çš„åº•å±‚æ–¹æ³• å¯ä»¥ç»™æˆ‘ä»¬ç»„ä»¶åˆ›å»ºä¸€ä¸ªè™šæ‹ŸDOM ä¹Ÿå°±æ˜¯Vnode</span></span><br><span class="line">        <span class="keyword">const</span> vnode: VNode = createVNode(Loading)</span><br><span class="line">        <span class="comment">//render æŠŠæˆ‘ä»¬çš„Vnode ç”ŸæˆçœŸå®DOM å¹¶ä¸”æŒ‚è½½åˆ°æŒ‡å®šèŠ‚ç‚¹</span></span><br><span class="line">        render(vnode, <span class="built_in">document</span>.body)</span><br><span class="line">        <span class="comment">// Vue æä¾›çš„å…¨å±€é…ç½® å¯ä»¥è‡ªå®šä¹‰</span></span><br><span class="line">        app.config.globalProperties.$loading = &#123;</span><br><span class="line">            show: <span class="function">() =&gt;</span> vnode.component?.exposed?.show(),</span><br><span class="line">            hide: <span class="function">() =&gt;</span> vnode.component?.exposed?.hide()</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Main.ts</span></span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">&#x27;./components/loading&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> app = createApp(App)</span><br><span class="line">app.use(Loading)</span><br><span class="line">type Lod = &#123;</span><br><span class="line">    show: <span class="function">() =&gt;</span> <span class="keyword">void</span>,</span><br><span class="line">    hide: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¼–å†™ts loading å£°æ˜æ–‡ä»¶æ”¾ç½®æŠ¥é”™ å’Œ æ™ºèƒ½æç¤º</span></span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;@vue/runtime-core&#x27;</span> &#123;</span><br><span class="line">    <span class="keyword">export</span> interface ComponentCustomProperties &#123;</span><br><span class="line">        $loading: Lod</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ä½¿ç”¨æ–¹æ³•</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import &#123; ref,reactive,getCurrentInstance&#125; from &#39;vue&#39;</span><br><span class="line">const  instance &#x3D; getCurrentInstance()  </span><br><span class="line">instance?.proxy?.$Loading.show()</span><br><span class="line">setTimeout(()&#x3D;&gt;&#123;</span><br><span class="line">  instance?.proxy?.$Loading.hide()</span><br><span class="line">&#125;,5000)</span><br><span class="line">&#x2F;&#x2F; console.log(instance)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">*&#123;</span><br><span class="line">  padding: 0;</span><br><span class="line">  margin: 0;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Vue-use-æºç æ‰‹å†™"><a href="#Vue-use-æºç æ‰‹å†™" class="headerlink" title="Vue use æºç æ‰‹å†™"></a>Vue use æºç æ‰‹å†™</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import type &#123; App &#125; from &#39;vue&#39;</span><br><span class="line">import &#123; app &#125; from &#39;.&#x2F;main&#39;</span><br><span class="line"> </span><br><span class="line">interface Use &#123;</span><br><span class="line">    install: (app: App, ...options: any[]) &#x3D;&gt; void</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">const installedList &#x3D; new Set()</span><br><span class="line"> </span><br><span class="line">export function MyUse&lt;T extends Use&gt;(plugin: T, ...options: any[]) &#123;</span><br><span class="line">    if(installedList.has(plugin))&#123;</span><br><span class="line">      return console.warn(&#39;é‡å¤æ·»åŠ æ’ä»¶&#39;,plugin)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        plugin.install(app, ...options)</span><br><span class="line">        installedList.add(plugin)</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h2 id="Scopedå’Œæ ·å¼-ç©¿é€"><a href="#Scopedå’Œæ ·å¼-ç©¿é€" class="headerlink" title="Scopedå’Œæ ·å¼ ç©¿é€"></a>Scopedå’Œæ ·å¼ ç©¿é€</h2><p>ä¸»è¦æ˜¯ç”¨äºä¿®æ”¹å¾ˆå¤švueå¸¸ç”¨çš„ç»„ä»¶åº“ï¼ˆelement, <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=vant&spm=1001.2101.3001.7020">vant</a>, AntDesiginï¼‰ï¼Œè™½ç„¶é…å¥½äº†æ ·å¼ä½†æ˜¯è¿˜æ˜¯éœ€è¦æ›´æ”¹å…¶ä»–çš„æ ·å¼</p>
<p>å°±éœ€è¦ç”¨åˆ°<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%A0%B7%E5%BC%8F%E7%A9%BF%E9%80%8F&spm=1001.2101.3001.7020">æ ·å¼ç©¿é€</a></p>
<p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=scoped&spm=1001.2101.3001.7020">scoped</a>çš„åŸç†</p>
<p>vueä¸­çš„scoped é€šè¿‡åœ¨DOMç»“æ„ä»¥åŠcssæ ·å¼ä¸ŠåŠ å”¯ä¸€ä¸é‡å¤çš„æ ‡è®°:data-v-hashçš„æ–¹å¼ï¼Œä»¥ä¿è¯å”¯ä¸€ï¼ˆè€Œè¿™ä¸ªå·¥ä½œæ˜¯ç”±è¿‡PostCSSè½¬è¯‘å®ç°çš„ï¼‰ï¼Œè¾¾åˆ°æ ·å¼ç§æœ‰åŒ–æ¨¡å—åŒ–çš„ç›®çš„ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹scopedä¸‰æ¡æ¸²æŸ“è§„åˆ™ï¼š</p>
<ol>
<li>ç»™HTMLçš„DOMèŠ‚ç‚¹åŠ ä¸€ä¸ªä¸é‡å¤dataå±æ€§(å½¢å¦‚ï¼šdata-v-123)æ¥è¡¨ç¤ºä»–çš„å”¯ä¸€æ€§</li>
<li>åœ¨æ¯å¥cssé€‰æ‹©å™¨çš„æœ«å°¾ï¼ˆç¼–è¯‘åçš„ç”Ÿæˆçš„cssè¯­å¥ï¼‰åŠ ä¸€ä¸ªå½“å‰ç»„ä»¶çš„dataå±æ€§é€‰æ‹©å™¨ï¼ˆå¦‚[data-v-123]ï¼‰æ¥ç§æœ‰åŒ–æ ·å¼</li>
<li>å¦‚æœç»„ä»¶å†…éƒ¨åŒ…å«æœ‰å…¶ä»–ç»„ä»¶ï¼Œåªä¼šç»™å…¶ä»–ç»„ä»¶çš„æœ€å¤–å±‚æ ‡ç­¾åŠ ä¸Šå½“å‰ç»„ä»¶çš„dataå±æ€§ï¼ˆå…·æœ‰å¤šä¸ªæ ¹èŠ‚ç‚¹çš„å­ç»„ä»¶ä¸èƒ½ä»çˆ¶èŒƒå›´çš„æ ·å¼è®¾ç½®æ ·å¼ï¼‰</li>
</ol>
<p>PostCSSä¼šç»™ä¸€ä¸ªç»„ä»¶ä¸­çš„æ‰€æœ‰domæ·»åŠ äº†ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åŠ¨æ€å±æ€§data-v-xxxxï¼Œç„¶åï¼Œç»™CSSé€‰æ‹©å™¨é¢å¤–æ·»åŠ ä¸€ä¸ªå¯¹åº”çš„å±æ€§é€‰æ‹©å™¨æ¥é€‰æ‹©è¯¥ç»„ä»¶ä¸­domï¼Œè¿™ç§åšæ³•ä½¿å¾—æ ·å¼åªä½œç”¨äºå«æœ‰è¯¥å±æ€§çš„domâ€”â€”ç»„ä»¶å†…éƒ¨dom, ä»è€Œè¾¾åˆ°äº†â€™æ ·å¼æ¨¡å—åŒ–â€™çš„æ•ˆæœ.</p>
<p> Vue æä¾›äº†æ ·å¼ç©¿é€:<strong>deep()</strong> ä»–çš„ä½œç”¨å°±æ˜¯ç”¨æ¥æ”¹å˜ å±æ€§é€‰æ‹©å™¨çš„ä½ç½®</p>
<h2 id="css-Styleå®Œæ•´æ–°ç‰¹æ€§"><a href="#css-Styleå®Œæ•´æ–°ç‰¹æ€§" class="headerlink" title="css Styleå®Œæ•´æ–°ç‰¹æ€§"></a>css Styleå®Œæ•´æ–°ç‰¹æ€§</h2><p>é™¤äº†deep(),å…¶å®è¿˜æœ‰ä¸¤ä¸ªé€‰æ‹©å™¨å¯ä»¥è¡¥å……</p>
<h3 id="æ’æ§½é€‰æ‹©å™¨-slotted"><a href="#æ’æ§½é€‰æ‹©å™¨-slotted" class="headerlink" title="æ’æ§½é€‰æ‹©å™¨(slotted)"></a>æ’æ§½é€‰æ‹©å™¨(slotted)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Aç»„ä»¶</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        æˆ‘æ˜¯æ’æ§½</span><br><span class="line">        &lt;slot&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"> :slotted(.a) &#123;</span><br><span class="line">    color:red</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; çˆ¶ç»„ä»¶</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;A&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;a&quot;&gt;ç§äººå®šåˆ¶div&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;A&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import A from &quot;@&#x2F;components&#x2F;A.vue&quot;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>



<h3 id="å…¨å±€é€‰æ‹©å™¨"><a href="#å…¨å±€é€‰æ‹©å™¨" class="headerlink" title="å…¨å±€é€‰æ‹©å™¨"></a>å…¨å±€é€‰æ‹©å™¨</h3><p>åœ¨ä¹‹å‰æˆ‘ä»¬æƒ³åŠ å…¥å…¨å±€ æ ·å¼ é€šå¸¸éƒ½æ˜¯æ–°å»ºä¸€ä¸ªstyle æ ‡ç­¾ ä¸åŠ <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=scoped&spm=1001.2101.3001.7020">scoped</a> ç°åœ¨æœ‰æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line"> <span class="selector-tag">div</span>&#123;</span><br><span class="line">     <span class="attribute">color</span>:red</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/<span class="selector-tag">style</span>&gt;</span><br><span class="line"> </span><br><span class="line">//  æ•ˆæœç­‰åŒäºä¸Šé¢</span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"><span class="selector-pseudo">:global(div)</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>:red</span><br><span class="line">&#125;</span><br><span class="line">&lt;/<span class="selector-tag">style</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="åŠ¨æ€-CSS"><a href="#åŠ¨æ€-CSS" class="headerlink" title="åŠ¨æ€ CSS"></a>åŠ¨æ€ CSS</h3><p>å•æ–‡ä»¶ç»„ä»¶çš„ <code>&lt;style&gt;</code> æ ‡ç­¾å¯ä»¥é€šè¿‡ <code>v-bind</code> è¿™ä¸€ CSS å‡½æ•°å°† CSS çš„å€¼å…³è”åˆ°åŠ¨æ€çš„ç»„ä»¶çŠ¶æ€ä¸Šï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;div&quot;&gt;</span><br><span class="line">       å°æ»¡æ˜¯ä¸ªå¼Ÿå¼Ÿ</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script lang&#x3D;&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#39;vue&#39;</span><br><span class="line">const red &#x3D; ref&lt;string&gt;(&#39;red&#39;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;</span><br><span class="line">.div&#123;</span><br><span class="line">   color:v-bind(red)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯å¯¹è±¡ <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=v-bind&spm=1001.2101.3001.7020">v-bind</a> ,åŠ å¼•å·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> &lt;template&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;div&quot;&gt;</span><br><span class="line">        å°æ»¡æ˜¯ä¸ªå¼Ÿå¼Ÿ</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script lang&#x3D;&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;</span><br><span class="line">const red &#x3D; ref(&#123;</span><br><span class="line">    color:&#39;pink&#39;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;style lang&#x3D;&quot;less&quot; scoped&gt;</span><br><span class="line">.div &#123;</span><br><span class="line">    color: v-bind(&#39;red.color&#39;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Mitt"><a href="#Mitt" class="headerlink" title="Mitt"></a>Mitt</h2><p>åœ¨<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=vue3&spm=1001.2101.3001.7020">vue3</a>ä¸­$onï¼Œ$off å’Œ $once å®ä¾‹æ–¹æ³•å·²è¢«ç§»é™¤ï¼Œç»„ä»¶å®ä¾‹ä¸å†å®ç°äº‹ä»¶è§¦å‘æ¥å£ï¼Œå› æ­¤å¤§å®¶ç†Ÿæ‚‰çš„EventBusä¾¿æ— æ³•ä½¿ç”¨äº†ã€‚ç„¶è€Œæˆ‘ä»¬ä¹ æƒ¯äº†ä½¿ç”¨EventBusï¼Œå¯¹äºè¿™ç§æƒ…å†µæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Mittåº“ï¼ˆå…¶å®å°±æ˜¯æˆ‘ä»¬è§†é¢‘ä¸­è®²çš„å‘å¸ƒè®¢é˜…æ¨¡å¼çš„è®¾è®¡ï¼‰</p>
<h3 id="main-ts-åˆå§‹åŒ–"><a href="#main-ts-åˆå§‹åŒ–" class="headerlink" title="main.ts åˆå§‹åŒ–"></a>main.ts åˆå§‹åŒ–</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> Mit = mitt()</span><br><span class="line"> </span><br><span class="line"><span class="comment">//TypeScriptæ³¨å†Œ</span></span><br><span class="line"><span class="comment">// ç”±äºå¿…é¡»è¦æ‹“å±•ComponentCustomPropertiesç±»å‹æ‰èƒ½è·å¾—ç±»å‹æç¤º</span></span><br><span class="line"><span class="keyword">declare</span> <span class="built_in">module</span> <span class="string">&quot;vue&quot;</span> &#123;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">interface</span> ComponentCustomProperties &#123;</span><br><span class="line">        $Bus: <span class="keyword">typeof</span> Mit</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//Vue3æŒ‚è½½å…¨å±€API</span></span><br><span class="line">app.config.globalProperties.$Bus = Mit</span><br><span class="line"> </span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨æ–¹æ³•é€šè¿‡emitæ´¾å‘ï¼Œ-on-æ–¹æ³•æ·»åŠ äº‹ä»¶ï¼Œoff-æ–¹æ³•ç§»é™¤ï¼Œclear-æ¸…ç©ºæ‰€æœ‰"><a href="#ä½¿ç”¨æ–¹æ³•é€šè¿‡emitæ´¾å‘ï¼Œ-on-æ–¹æ³•æ·»åŠ äº‹ä»¶ï¼Œoff-æ–¹æ³•ç§»é™¤ï¼Œclear-æ¸…ç©ºæ‰€æœ‰" class="headerlink" title="ä½¿ç”¨æ–¹æ³•é€šè¿‡emitæ´¾å‘ï¼Œ on æ–¹æ³•æ·»åŠ äº‹ä»¶ï¼Œoff æ–¹æ³•ç§»é™¤ï¼Œclear æ¸…ç©ºæ‰€æœ‰"></a>ä½¿ç”¨æ–¹æ³•é€šè¿‡emitæ´¾å‘ï¼Œ on æ–¹æ³•æ·»åŠ äº‹ä»¶ï¼Œoff æ–¹æ³•ç§»é™¤ï¼Œclear æ¸…ç©ºæ‰€æœ‰</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Aç»„ä»¶æ´¾å‘ï¼ˆemitï¼‰</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;æˆ‘æ˜¯A&lt;&#x2F;h1&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;emit1&quot;&gt;emit1&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;emit2&quot;&gt;emit2&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import &#123; getCurrentInstance &#125; from &#39;vue&#39;</span><br><span class="line">const instance &#x3D; getCurrentInstance();</span><br><span class="line">const emit1 &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    instance?.proxy?.$Bus.emit(&#39;on-num&#39;, 100)</span><br><span class="line">&#125;</span><br><span class="line">const emit2 &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    instance?.proxy?.$Bus.emit(&#39;*****&#39;, 500)</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Bç»„ä»¶ç›‘å¬ï¼ˆonï¼‰</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;æˆ‘æ˜¯B&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang&#x3D;&#39;ts&#39;&gt;</span><br><span class="line">import &#123; getCurrentInstance &#125; from &#39;vue&#39;</span><br><span class="line">const instance &#x3D; getCurrentInstance()</span><br><span class="line">instance?.proxy?.$Bus.on(&#39;on-num&#39;, (num) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(num,&#39;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;B&#39;)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ç›‘å¬æ‰€æœ‰äº‹ä»¶ï¼ˆ-on-â€œ-â€-ï¼‰"><a href="#ç›‘å¬æ‰€æœ‰äº‹ä»¶ï¼ˆ-on-â€œ-â€-ï¼‰" class="headerlink" title="ç›‘å¬æ‰€æœ‰äº‹ä»¶ï¼ˆ on(â€œ*â€) ï¼‰"></a>ç›‘å¬æ‰€æœ‰äº‹ä»¶ï¼ˆ on(â€œ*â€) ï¼‰</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">instance?.proxy?.$Bus.on(<span class="string">&#x27;*&#x27;</span>,<span class="function">(<span class="params"><span class="keyword">type</span>,num</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">type</span>,num,<span class="string">&#x27;===========&gt;B&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="ç§»é™¤ç›‘å¬äº‹ä»¶ï¼ˆoffï¼‰"><a href="#ç§»é™¤ç›‘å¬äº‹ä»¶ï¼ˆoffï¼‰" class="headerlink" title="ç§»é™¤ç›‘å¬äº‹ä»¶ï¼ˆoffï¼‰"></a>ç§»é™¤ç›‘å¬äº‹ä»¶ï¼ˆoffï¼‰</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Fn = <span class="function">(<span class="params">num: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(num, <span class="string">&#x27;===========&gt;B&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">instance?.proxy?.$Bus.on(<span class="string">&#x27;on-num&#x27;</span>,Fn)<span class="comment">//listen</span></span><br><span class="line">instance?.proxy?.$Bus.off(<span class="string">&#x27;on-num&#x27;</span>,Fn)<span class="comment">//unListen</span></span><br></pre></td></tr></table></figure>

<h3 id="æ¸…ç©ºæ‰€æœ‰ç›‘å¬ï¼ˆclearï¼‰"><a href="#æ¸…ç©ºæ‰€æœ‰ç›‘å¬ï¼ˆclearï¼‰" class="headerlink" title="æ¸…ç©ºæ‰€æœ‰ç›‘å¬ï¼ˆclearï¼‰"></a>æ¸…ç©ºæ‰€æœ‰ç›‘å¬ï¼ˆclearï¼‰</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">instance?.proxy?.$Bus.all.clear() </span><br></pre></td></tr></table></figure>

<h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><p><strong>ä»–çš„ä¸»è¦ä½œç”¨å°±æ˜¯è®©å¼€å‘è€…åŒºåˆ†ä¸åŒçš„è¿è¡Œç¯å¢ƒï¼Œæ¥å®ç° å…¼å®¹å¼€å‘å’Œç”Ÿäº§</strong></p>
<p><strong>ä¾‹å¦‚ npm run dev å°±æ˜¯å¼€å‘ç¯å¢ƒ npm run build å°±æ˜¯ç”Ÿäº§ç¯å¢ƒç­‰ç­‰</strong></p>
<p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Vite&spm=1001.2101.3001.7020">Vite</a> åœ¨ä¸€ä¸ªç‰¹æ®Šçš„ <strong><code>import.meta.env</code></strong> å¯¹è±¡ä¸Šæš´éœ²ç¯å¢ƒå˜é‡ã€‚è¿™é‡Œæœ‰ä¸€äº›åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½å¯ä»¥ä½¿ç”¨çš„å†…å»ºå˜é‡</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;BASE_URL&quot;</span>:<span class="string">&quot;/&quot;</span>, <span class="comment">//éƒ¨ç½²æ—¶çš„URLå‰ç¼€</span></span><br><span class="line">    <span class="attr">&quot;MODE&quot;</span>:<span class="string">&quot;development&quot;</span>, <span class="comment">//è¿è¡Œæ¨¡å¼</span></span><br><span class="line">    <span class="attr">&quot;DEV&quot;</span>:<span class="literal">true</span>,<span class="attr">&quot;  //æ˜¯å¦åœ¨devç¯å¢ƒ</span></span><br><span class="line"><span class="attr">    PROD&quot;</span>:<span class="literal">false</span>, <span class="comment">//æ˜¯å¦æ˜¯build ç¯å¢ƒ</span></span><br><span class="line">    <span class="attr">&quot;SSR&quot;</span>:<span class="literal">false</span> <span class="comment">//æ˜¯å¦æ˜¯SSR æœåŠ¡ç«¯æ¸²æŸ“æ¨¡å¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯è¿™ä¸ªç¯å¢ƒå˜é‡ä¸èƒ½ä½¿ç”¨åŠ¨æ€èµ‹å€¼import.meta.env[key] å› ä¸ºè¿™äº›ç¯å¢ƒå˜é‡åœ¨æ‰“åŒ…çš„æ—¶å€™æ˜¯ä¼šè¢«ç¡¬ç¼–ç çš„é€šè¿‡JSON.stringify æ³¨å…¥æµè§ˆå™¨çš„</strong></p>
<h3 id="é…ç½®é¢å¤–çš„ç¯å¢ƒå˜é‡"><a href="#é…ç½®é¢å¤–çš„ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®é¢å¤–çš„ç¯å¢ƒå˜é‡"></a>é…ç½®é¢å¤–çš„ç¯å¢ƒå˜é‡</h3><p>åœ¨æ ¹ç›®å½•æ–°å»ºenv æ–‡ä»¶ å¯ä»¥åˆ›å»ºå¤šä¸ª</p>
<p>æ ¼å¼ï¼š.env.development</p>
<p> ä¿®æ”¹å¯åŠ¨å‘½ä»¤</p>
<p>åœ¨ package json é…ç½® â€“mode envæ–‡ä»¶åç§°()</p>
<p>é…ç½®æ™ºèƒ½æç¤º:env.d.ts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface ImportMetaEnv &#123;</span><br><span class="line">    VITE_XIAOMAN:string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯»å–ç¯å¢ƒå˜é‡å±æ€§å€¼</p>
<p>import.meta.env.VITE_XIAOMAN</p>
<h3 id="ç”Ÿäº§ç¯å¢ƒä½¿ç”¨"><a href="#ç”Ÿäº§ç¯å¢ƒä½¿ç”¨" class="headerlink" title="ç”Ÿäº§ç¯å¢ƒä½¿ç”¨"></a>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨</h3><p>åˆ›å»º .env.production åœ¨æ‰§è¡Œnpm run build çš„æ—¶å€™ä»–ä¼šè‡ªå·±åŠ è½½è¿™ä¸ªæ–‡ä»¶ </p>
<h3 id="å¦‚æœæƒ³åœ¨vite-config-ts-ä½¿ç”¨ç¯å¢ƒå˜é‡"><a href="#å¦‚æœæƒ³åœ¨vite-config-ts-ä½¿ç”¨ç¯å¢ƒå˜é‡" class="headerlink" title="å¦‚æœæƒ³åœ¨vite.config.ts ä½¿ç”¨ç¯å¢ƒå˜é‡"></a><strong>å¦‚æœæƒ³åœ¨vite.config.ts ä½¿ç”¨ç¯å¢ƒå˜é‡</strong></h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fileURLToPath, URL &#125; <span class="keyword">from</span> <span class="string">&#x27;node:url&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig, loadEnv &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vueJsx <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue-jsx&#x27;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123;mode&#125;:<span class="built_in">any</span>) =&gt; &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">console</span>.log(loadEnv(mode,process.cwd()))</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> defineConfig(&#123;</span><br><span class="line">    plugins: [vue(), vueJsx()],</span><br><span class="line">    resolve: &#123;</span><br><span class="line">      alias: &#123;</span><br><span class="line">        <span class="string">&#x27;@&#x27;</span>: fileURLToPath(<span class="keyword">new</span> URL(<span class="string">&#x27;./src&#x27;</span>, <span class="keyword">import</span>.meta.url))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h2 id="Proxyè·¨åŸŸ"><a href="#Proxyè·¨åŸŸ" class="headerlink" title="Proxyè·¨åŸŸ"></a>Proxyè·¨åŸŸ</h2><h3 id="ä»€ä¹ˆæ˜¯è·¨åŸŸ"><a href="#ä»€ä¹ˆæ˜¯è·¨åŸŸ" class="headerlink" title="ä»€ä¹ˆæ˜¯è·¨åŸŸ"></a>ä»€ä¹ˆæ˜¯<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%B7%A8%E5%9F%9F&spm=1001.2101.3001.7020">è·¨åŸŸ</a></h3><p>ä¸»è¦æ˜¯å‡ºäºæµè§ˆå™¨çš„<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5&spm=1001.2101.3001.7020">åŒæºç­–ç•¥</a>é™åˆ¶ï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ã€‚</p>
<p>å½“ä¸€ä¸ªè¯·æ±‚urlçš„ <strong>åè®®ã€åŸŸåã€ç«¯å£</strong> ä¸‰è€…ä¹‹é—´ä»»æ„ä¸€ä¸ªä¸å½“å‰é¡µé¢urlä¸åŒå³ä¸ºè·¨åŸŸã€‚</p>
<h3 id="å¦‚ä½•è§£å†³è·¨åŸŸ"><a href="#å¦‚ä½•è§£å†³è·¨åŸŸ" class="headerlink" title="å¦‚ä½•è§£å†³è·¨åŸŸ"></a>å¦‚ä½•è§£å†³è·¨åŸŸ</h3><p>1.<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=jsonp&spm=1001.2101.3001.7020">jsonp</a> è¿™ç§æ–¹å¼åœ¨ä¹‹å‰å¾ˆå¸¸è§ï¼Œä»–å®ç°çš„åŸºæœ¬åŸç†æ˜¯åˆ©ç”¨äº†HTMLé‡Œscriptå…ƒç´ æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶ åŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾ï¼Œå°†srcä½œä¸ºæœåŠ¡å™¨åœ°å€ï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ªcallbackæ¥å—è¿”å›çš„å‚æ•°</p>
<p>2.cors è®¾ç½® CORS å…è®¸è·¨åŸŸèµ„æºå…±äº« éœ€è¦åç«¯è®¾ç½®</p>
<p>3.ä½¿ç”¨Vite proxy æˆ–è€… nodeä»£ç† æˆ–è€… webpack proxy ä»–ä»¬ä¸‰ç§æ–¹å¼éƒ½æ˜¯ä»£ç†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// node åç«¯æ¥å£</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"> </span><br><span class="line"><span class="comment">//åˆ›å»ºgetè¯·æ±‚</span></span><br><span class="line">app.get(<span class="string">&#x27;/xm&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">     res.json(&#123;</span><br><span class="line">        code:<span class="number">200</span>,</span><br><span class="line">        message:<span class="string">&quot;è¯·æ±‚æˆåŠŸ&quot;</span></span><br><span class="line">     &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//ç«¯å£å·9001</span></span><br><span class="line">app.listen(<span class="number">9001</span>)</span><br></pre></td></tr></table></figure>

<p>åœ¨vite.config.js/ts è¿›è¡Œé…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">export default defineConfig(&#123;</span><br><span class="line">  plugins: [vue()],</span><br><span class="line">  server:&#123;</span><br><span class="line">     proxy:&#123;</span><br><span class="line">        &#39;&#x2F;api&#39;:&#123;</span><br><span class="line">            target:&quot;http:&#x2F;&#x2F;localhost:9001&#x2F;&quot;, &#x2F;&#x2F;è·¨åŸŸåœ°å€</span><br><span class="line">            changeOrigin:true, &#x2F;&#x2F;æ”¯æŒè·¨åŸŸ</span><br><span class="line">            rewrite:(path) &#x3D;&gt; path.replace(&#x2F;^\&#x2F;api&#x2F;, &quot;&quot;)&#x2F;&#x2F;é‡å†™è·¯å¾„,æ›¿æ¢&#x2F;api</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


      
       <hr><span style="font-style: italic;color: gray;"> --- </span>
    </div>
</article>







    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2019-2022
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    

    
</style>







</html>
